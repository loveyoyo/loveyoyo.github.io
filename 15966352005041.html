<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  自定义View - KangLu
  
  </title>
 <meta name="description" content="个人文章">
 <link href="atom.xml" rel="alternate" title="KangLu" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">KangLu</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; KangLu</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>Android Studio开发调试</label></li>

          
            <li><a title="jks和keystore的区别" href="16213263578694.html">jks和keystore的区别</a></li>
          
            <li><a title="UI Automator Viewer的使用" href="16139851951679.html">UI Automator Viewer的使用</a></li>
          
            <li><a title="查看Android Studio中使用的依赖库" href="16137935397183.html">查看Android Studio中使用的依赖库</a></li>
          
            <li><a title="查看签名文件内容" href="16062676480386.html">查看签名文件内容</a></li>
          
            <li><a title="使用TraceView" href="16001927395196.html">使用TraceView</a></li>
          
            <li><a title="Android Studio的Structure工具窗口" href="15979290265055.html">Android Studio的Structure工具窗口</a></li>
          
            <li><a title="使用tcpdump抓包" href="15966325912957.html">使用tcpdump抓包</a></li>
          
            <li><a title="Android Studio使用小技巧" href="15586135036171.html">Android Studio使用小技巧</a></li>
          
            <li><a title="编码习惯" href="15881280991297.html">编码习惯</a></li>
          
            <li><a title="Android Studio使用的插件" href="15747689633391.html">Android Studio使用的插件</a></li>
          
            <li><a title="Gradle知识" href="15873151730996.html">Gradle知识</a></li>
          
            <li><a title="APK文件结构以及优化APK的大小" href="15876077941240.html">APK文件结构以及优化APK的大小</a></li>
          
            <li><a title="Android Device Monitor工具" href="15955778686384.html">Android Device Monitor工具</a></li>
          
            <li><a title="Android Studio使用viewbinding" href="15927964749535.html">Android Studio使用viewbinding</a></li>
          
            <li><a title="Android Studio报的错误" href="15747589164365.html">Android Studio报的错误</a></li>
          
            <li><a title="设置代码信息模版" href="15686328305080.html">设置代码信息模版</a></li>
          
            <li><a title="ADB命令" href="15706865755803.html">ADB命令</a></li>
          
            <li><a title="使用ADB命令查看数据库数据·" href="15776895359955.html">使用ADB命令查看数据库数据·</a></li>
          
            <li><a title="AAPT命令" href="15706865946961.html">AAPT命令</a></li>
          
            <li><a title="SecureCRT工具使用" href="15744200819532.html">SecureCRT工具使用</a></li>
          
            <li><a title="Gradle和Gradle插件之间的版本关联" href="15663700347276.html">Gradle和Gradle插件之间的版本关联</a></li>
          
            <li><a title="Android将library打包成jar包或者aar文件" href="15777599008991.html">Android将library打包成jar包或者aar文件</a></li>
          
            <li><a title="build.gradle文件" href="15638732552597.html">build.gradle文件</a></li>
          

      
        <li class="divider"></li>
        <li><label>四大组件及其相关类</label></li>

          
            <li><a title="Deep Links -- 深度链接" href="16208955206090.html">Deep Links -- 深度链接</a></li>
          
            <li><a title="Activity的状态保存和恢复" href="15994232717477.html">Activity的状态保存和恢复</a></li>
          
            <li><a title="View的滑动冲突" href="15991357742601.html">View的滑动冲突</a></li>
          
            <li><a title="View的滑动" href="15988921451098.html">View的滑动</a></li>
          
            <li><a title="Android的KeyEvent按键触摸事件传递机制" href="15984305843879.html">Android的KeyEvent按键触摸事件传递机制</a></li>
          
            <li><a title="自定义View和自定义ViewGroup中主要方法的执行顺序" href="15979224400729.html">自定义View和自定义ViewGroup中主要方法的执行顺序</a></li>
          
            <li><a title="自定义容器" href="15975164203980.html">自定义容器</a></li>
          
            <li><a title="自定义View" href="15966352005041.html">自定义View</a></li>
          
            <li><a title="AIDL" href="15965603616547.html">AIDL</a></li>
          
            <li><a title="View树的绘制流程" href="15961852523240.html">View树的绘制流程</a></li>
          
            <li><a title="Activity的组成结构" href="15961826101444.html">Activity的组成结构</a></li>
          
            <li><a title="Android数据存储" href="15925546637258.html">Android数据存储</a></li>
          
            <li><a title="Activity的启动流程" href="15913608813328.html">Activity的启动流程</a></li>
          
            <li><a title="安卓系统架构" href="15900311156878.html">安卓系统架构</a></li>
          
            <li><a title="多线程" href="15895247341993.html">多线程</a></li>
          
            <li><a title="View体系" href="15892159078168.html">View体系</a></li>
          
            <li><a title="四大组件的工作过程" href="15881609494140.html">四大组件的工作过程</a></li>
          
            <li><a title="Android IPC机制" href="15876457912729.html">Android IPC机制</a></li>
          
            <li><a title="Android数据序列化" href="15874843676808.html">Android数据序列化</a></li>
          
            <li><a title="Android的MotionEvent事件传递机制" href="15862769966851.html">Android的MotionEvent事件传递机制</a></li>
          
            <li><a title="SharedPreferences" href="15601718627780.html">SharedPreferences</a></li>
          
            <li><a title="Android简介" href="15834044312131.html">Android简介</a></li>
          
            <li><a title="Activity" href="15598792154683.html">Activity</a></li>
          
            <li><a title="安卓存储方式" href="15720050214610.html">安卓存储方式</a></li>
          
            <li><a title="Binder机制" href="15719000904205.html">Binder机制</a></li>
          
            <li><a title="安卓事件处理" href="15717946812357.html">安卓事件处理</a></li>
          
            <li><a title="Intent" href="15640232512188.html">Intent</a></li>
          
            <li><a title="ContentProvider--内容提供者" href="15603581865930.html">ContentProvider--内容提供者</a></li>
          
            <li><a title="Service--服务" href="15603581806506.html">Service--服务</a></li>
          
            <li><a title="BroadcastReceiver" href="15603581707523.html">BroadcastReceiver</a></li>
          

      
        <li class="divider"></li>
        <li><label>Android组件</label></li>

          
            <li><a title="Adapter及其子类" href="15987345244709.html">Adapter及其子类</a></li>
          
            <li><a title="FloatingActionButton" href="15873151238128.html">FloatingActionButton</a></li>
          
            <li><a title="NavigationView" href="15873151137838.html">NavigationView</a></li>
          
            <li><a title="BottomSheetBehavior" href="15873151109302.html">BottomSheetBehavior</a></li>
          
            <li><a title="TabLayout" href="15873151075682.html">TabLayout</a></li>
          
            <li><a title="CollaspingToolbarLayout" href="15873150961844.html">CollaspingToolbarLayout</a></li>
          
            <li><a title="CoordinatorLayout" href="15873150855710.html">CoordinatorLayout</a></li>
          
            <li><a title="TextInputLayout" href="15873150854952.html">TextInputLayout</a></li>
          
            <li><a title="Snackbar" href="15873150711511.html">Snackbar</a></li>
          
            <li><a title="View（视图）" href="15587797736951.html">View（视图）</a></li>
          
            <li><a title="TextView" href="15584534943886.html">TextView</a></li>
          
            <li><a title="EditText" href="15587752872990.html">EditText</a></li>
          
            <li><a title="ImageView" href="15590447462728.html">ImageView</a></li>
          
            <li><a title="Button" href="15590305484634.html">Button</a></li>
          
            <li><a title="Toast" href="15832318775043.html">Toast</a></li>
          
            <li><a title="Spinner" href="15601388608282.html">Spinner</a></li>
          
            <li><a title="CheckBox和RadioButton" href="15601388701602.html">CheckBox和RadioButton</a></li>
          
            <li><a title="ProgressBar" href="15601389345357.html">ProgressBar</a></li>
          
            <li><a title="SeekBar" href="15832322241074.html">SeekBar</a></li>
          
            <li><a title="RatingBar" href="15832323147149.html">RatingBar</a></li>
          
            <li><a title="时间相关的控件" href="15832327057402.html">时间相关的控件</a></li>
          
            <li><a title="WebView" href="15601389648936.html">WebView</a></li>
          
            <li><a title="ListView" href="15590482064056.html">ListView</a></li>
          
            <li><a title="RecyclerView" href="15601389530971.html">RecyclerView</a></li>
          
            <li><a title="ScrollView和HorizontalView" href="15601389773513.html">ScrollView和HorizontalView</a></li>
          
            <li><a title="ViewPager" href="15601389699132.html">ViewPager</a></li>
          
            <li><a title="Fragment" href="15830020373441.html">Fragment</a></li>
          
            <li><a title="TabLayout" href="15639475255226.html">TabLayout</a></li>
          
            <li><a title="WheelView" href="15832330644393.html">WheelView</a></li>
          
            <li><a title="SwipeRefreshLayout" href="15607374213373.html">SwipeRefreshLayout</a></li>
          
            <li><a title="三大布局根控件" href="15832328030131.html">三大布局根控件</a></li>
          
            <li><a title="ConstraintLayout" href="15720053521924.html">ConstraintLayout</a></li>
          
            <li><a title="序" href="15584059143309.html">序</a></li>
          

      
        <li class="divider"></li>
        <li><label>消息机制与存储</label></li>

          
            <li><a title="Thread" href="15941454444849.html">Thread</a></li>
          
            <li><a title="ThreadLocal类" href="15915526996179.html">ThreadLocal类</a></li>
          
            <li><a title="Message类" href="15915526938269.html">Message类</a></li>
          
            <li><a title="MessageQueue类" href="15915526852831.html">MessageQueue类</a></li>
          
            <li><a title="Handler类" href="15915526788145.html">Handler类</a></li>
          
            <li><a title="Looper类" href="15915526673284.html">Looper类</a></li>
          
            <li><a title="Android的消息机制--Handler消息机制" href="15887553843774.html">Android的消息机制--Handler消息机制</a></li>
          
            <li><a title="Handler消息机制" href="15681720095770.html">Handler消息机制</a></li>
          

      
        <li class="divider"></li>
        <li><label>网络请求相关</label></li>

          
            <li><a title="Android 9.0 http网络请求问题" href="16204446832298.html">Android 9.0 http网络请求问题</a></li>
          
            <li><a title="PC端浏览器使用Http协议缓存" href="16032827867874.html">PC端浏览器使用Http协议缓存</a></li>
          
            <li><a title="HttpClient和HttpURLConnection" href="15897672365492.html">HttpClient和HttpURLConnection</a></li>
          
            <li><a title="网络相关" href="15616048657421.html">网络相关</a></li>
          

      
        <li class="divider"></li>
        <li><label>Android功能</label></li>

          
            <li><a title="触摸事件" href="16221687313432.html">触摸事件</a></li>
          
            <li><a title="心跳包机制" href="16039934816197.html">心跳包机制</a></li>
          
            <li><a title="断点续传" href="16039920085823.html">断点续传</a></li>
          
            <li><a title="插件化" href="15832337513162.html">插件化</a></li>
          
            <li><a title="热修复" href="15832337461818.html">热修复</a></li>
          
            <li><a title="文件上传、下载、断点续传" href="15832337021510.html">文件上传、下载、断点续传</a></li>
          
            <li><a title="json/xml数据解析" href="15832336723066.html">json/xml数据解析</a></li>
          
            <li><a title="屏幕适配" href="15832335578226.html">屏幕适配</a></li>
          
            <li><a title="状态栏" href="15832335450787.html">状态栏</a></li>
          
            <li><a title="换肤" href="15832335396541.html">换肤</a></li>
          
            <li><a title="手势关闭" href="15832335221530.html">手势关闭</a></li>
          
            <li><a title="导航菜单" href="15832335120230.html">导航菜单</a></li>
          
            <li><a title="图表" href="15832335046878.html">图表</a></li>
          
            <li><a title="数据库" href="15832334917388.html">数据库</a></li>
          
            <li><a title="新手引导" href="15832334714220.html">新手引导</a></li>
          
            <li><a title="二维码和条形码" href="15832334567005.html">二维码和条形码</a></li>
          
            <li><a title="轮播图" href="15832334294029.html">轮播图</a></li>
          
            <li><a title="音视频" href="15832332927437.html">音视频</a></li>
          
            <li><a title="日志" href="15832038130305.html">日志</a></li>
          
            <li><a title="安卓系统设置" href="15794224269421.html">安卓系统设置</a></li>
          
            <li><a title="常用工具类和方法" href="15609277381914.html">常用工具类和方法</a></li>
          
            <li><a title="拍照和读取本地相册" href="15603979455589.html">拍照和读取本地相册</a></li>
          
            <li><a title="控制系统硬件功能" href="15603585084416.html">控制系统硬件功能</a></li>
          

      
        <li class="divider"></li>
        <li><label>Android资源文件</label></li>

          
            <li><a title="特殊符号" href="16124972972718.html">特殊符号</a></li>
          
            <li><a title="推送机制" href="16012297259440.html">推送机制</a></li>
          
            <li><a title="Android插件框架机制" href="16012289364746.html">Android插件框架机制</a></li>
          
            <li><a title="64K方法数限制原理与解决方案" href="16012264048970.html">64K方法数限制原理与解决方案</a></li>
          
            <li><a title="地图基础知识" href="15953376818758.html">地图基础知识</a></li>
          
            <li><a title="Android 布局优化" href="15900636437169.html">Android 布局优化</a></li>
          
            <li><a title="Drawable文件" href="15832339330725.html">Drawable文件</a></li>
          
            <li><a title="异步消息处理线程" href="15744242463129.html">异步消息处理线程</a></li>
          
            <li><a title="Handler消息机制" href="15640230934557.html">Handler消息机制</a></li>
          
            <li><a title="内存泄漏" href="15638690144641.html">内存泄漏</a></li>
          
            <li><a title="画图" href="15627251763320.html">画图</a></li>
          
            <li><a title="反编译" href="15626395593984.html">反编译</a></li>
          
            <li><a title="assets资源" href="15608221314548.html">assets资源</a></li>
          
            <li><a title="Permissions权限" href="15597992631758.html">Permissions权限</a></li>
          
            <li><a title="res文件夹中的资源" href="15597050707116.html">res文件夹中的资源</a></li>
          
            <li><a title="动画" href="15591315255964.html">动画</a></li>
          
            <li><a title="Style和Theme" href="15591171572096.html">Style和Theme</a></li>
          

      
        <li class="divider"></li>
        <li><label>安卓多媒体、图像</label></li>

          
            <li><a title="音频传输" href="16188902074852.html">音频传输</a></li>
          
            <li><a title="音频格式对比" href="16060934492693.html">音频格式对比</a></li>
          
            <li><a title="音频" href="16058388262225.html">音频</a></li>
          
            <li><a title="图片压缩" href="16032147433526.html">图片压缩</a></li>
          
            <li><a title="位图运算" href="15978627842395.html">位图运算</a></li>
          
            <li><a title="阴影和渐变" href="15978578322849.html">阴影和渐变</a></li>
          
            <li><a title="双缓存技术" href="15978446413433.html">双缓存技术</a></li>
          
            <li><a title="Canvas的clipXxx()方法" href="15977771825588.html">Canvas的clipXxx()方法</a></li>
          
            <li><a title="Canvas的坐标转换" href="15977752461748.html">Canvas的坐标转换</a></li>
          
            <li><a title="View的invalidate()方法" href="15977739560419.html">View的invalidate()方法</a></li>
          
            <li><a title="Canvas类和Paint类" href="15976921344218.html">Canvas类和Paint类</a></li>
          
            <li><a title="Bitmap类和BitmapDrawable类" href="15976898855375.html">Bitmap类和BitmapDrawable类</a></li>
          
            <li><a title="Rect类和RectF类" href="15976691326047.html">Rect类和RectF类</a></li>
          
            <li><a title="Point类和PointF类" href="15976663490288.html">Point类和PointF类</a></li>
          
            <li><a title="AudioManager" href="15960319990767.html">AudioManager</a></li>
          
            <li><a title="Android WebView和JavaScript的交互" href="15874899350106.html">Android WebView和JavaScript的交互</a></li>
          
            <li><a title="音视频相关" href="15635278413412.html">音视频相关</a></li>
          
            <li><a title="相机相关" href="15635278316611.html">相机相关</a></li>
          

      
        <li class="divider"></li>
        <li><label>Jetpack</label></li>

          
            <li><a title="Jetpack" href="16231186943622.html">Jetpack</a></li>
          
            <li><a title="Lifecycle" href="16178717142947.html">Lifecycle</a></li>
          
            <li><a title="Navigation" href="16207856239934.html">Navigation</a></li>
          

      
        <li class="divider"></li>
        <li><label>第三方库</label></li>

          
            <li><a title="Stetho" href="15632684758267.html">Stetho</a></li>
          
            <li><a title="LeakCanary" href="15632684640367.html">LeakCanary</a></li>
          
            <li><a title="Gson" href="15632684493835.html">Gson</a></li>
          
            <li><a title="支付" href="15632684444086.html">支付</a></li>
          
            <li><a title="推送" href="15632684365504.html">推送</a></li>
          
            <li><a title="二维码条形码库" href="15632683396317.html">二维码条形码库</a></li>
          
            <li><a title="RxJava" href="15632683277748.html">RxJava</a></li>
          
            <li><a title="SqlBright" href="15632683205618.html">SqlBright</a></li>
          
            <li><a title="GreenDao" href="15632683120036.html">GreenDao</a></li>
          
            <li><a title="Fresco" href="15632683056692.html">Fresco</a></li>
          
            <li><a title="Picasso" href="15632683006333.html">Picasso</a></li>
          
            <li><a title="Glide" href="15632682942973.html">Glide</a></li>
          
            <li><a title="ButterKnife" href="15632682824135.html">ButterKnife</a></li>
          
            <li><a title="EventBus" href="15632682766122.html">EventBus</a></li>
          
            <li><a title="Retrofit" href="15632682688049.html">Retrofit</a></li>
          
            <li><a title="OkHttp3" href="15632682616090.html">OkHttp3</a></li>
          

      
        <li class="divider"></li>
        <li><label>Android系统相关</label></li>

          
            <li><a title="AMS" href="16202952165241.html">AMS</a></li>
          
            <li><a title="安卓热修复" href="16041750280944.html">安卓热修复</a></li>
          
            <li><a title="安卓性能优化" href="16041742389517.html">安卓性能优化</a></li>
          
            <li><a title="线程池" href="16037158072749.html">线程池</a></li>
          
            <li><a title="App的启动过程" href="16036390477812.html">App的启动过程</a></li>
          
            <li><a title="APK启动过程" href="16007836387351.html">APK启动过程</a></li>
          
            <li><a title="apk文件以及打包流程" href="16006415583476.html">apk文件以及打包流程</a></li>
          
            <li><a title="ANR以及解决方法以及捕获未捕获的异常" href="16002456845586.html">ANR以及解决方法以及捕获未捕获的异常</a></li>
          
            <li><a title="内存溢出和解决方法" href="16001927297660.html">内存溢出和解决方法</a></li>
          
            <li><a title="APK安装过程" href="15997078103768.html">APK安装过程</a></li>
          
            <li><a title="Scroller" href="15988136317147.html">Scroller</a></li>
          
            <li><a title="VelocityTracker类" href="15988105105264.html">VelocityTracker类</a></li>
          
            <li><a title="MotionEvent屏幕触摸事件分发流程" href="15983458791697.html">MotionEvent屏幕触摸事件分发流程</a></li>
          
            <li><a title="KeyEvent按键点击事件处理流程" href="15982890451497.html">KeyEvent按键点击事件处理流程</a></li>
          
            <li><a title="Binder" href="15982033025648.html">Binder</a></li>
          
            <li><a title="TelephonyManager.java" href="15970492312259.html">TelephonyManager.java</a></li>
          
            <li><a title="setContentView()" href="15954049156461.html">setContentView()</a></li>
          
            <li><a title="AsyncTask.java" href="15953888428518.html">AsyncTask.java</a></li>
          
            <li><a title="ListView设置Adapter和更新数据源码分析--观察者模式" href="15951954419377.html">ListView设置Adapter和更新数据源码分析--观察者模式</a></li>
          
            <li><a title="PackageManagerService.java" href="15948481287731.html">PackageManagerService.java</a></li>
          
            <li><a title="SystemServer.java" href="15948434761291.html">SystemServer.java</a></li>
          
            <li><a title="Android系统启动过程" href="15946404844407.html">Android系统启动过程</a></li>
          
            <li><a title="Context" href="15936928417691.html">Context</a></li>
          
            <li><a title="Window和WindowManager" href="15882183325715.html">Window和WindowManager</a></li>
          
            <li><a title="Manifest清单文件" href="15596519462062.html">Manifest清单文件</a></li>
          

      
        <li class="divider"></li>
        <li><label>安卓源码</label></li>

          
            <li><a title="SystemClock类" href="16067889519707.html">SystemClock类</a></li>
          
            <li><a title="onUserInteraction()与onUserLeaveHint()" href="16003048093058.html">onUserInteraction()与onUserLeaveHint()</a></li>
          
            <li><a title="HandlerThread" href="16002981223383.html">HandlerThread</a></li>
          
            <li><a title="IntentService" href="16002980534244.html">IntentService</a></li>
          
            <li><a title="Scroller" href="15988136317147.html">Scroller</a></li>
          
            <li><a title="GestureDetector" href="15988119621841.html">GestureDetector</a></li>
          
            <li><a title="VelocityTracker类" href="15988105105264.html">VelocityTracker类</a></li>
          
            <li><a title="TelephonyManager.java" href="15970492312259.html">TelephonyManager.java</a></li>
          
            <li><a title="PackageManagerService.java" href="15948481287731.html">PackageManagerService.java</a></li>
          
            <li><a title="JNI调用机制" href="15719841747032.html">JNI调用机制</a></li>
          
            <li><a title="ComponentCallbacks和ComponentCallbacks2" href="15959378334016.html">ComponentCallbacks和ComponentCallbacks2</a></li>
          
            <li><a title="安卓源码目录结构分析" href="15713661513977.html">安卓源码目录结构分析</a></li>
          
            <li><a title="preloaded-classes" href="15717452568747.html">preloaded-classes</a></li>
          

      
        <li class="divider"></li>
        <li><label>Framework</label></li>

          
            <li><a title="连接Android和Linux内核的桥梁——Android的Bionic" href="15796625335119.html">连接Android和Linux内核的桥梁——Android的Bionic</a></li>
          
            <li><a title="Android的编译环境--Build系统" href="15791618199796.html">Android的编译环境--Build系统</a></li>
          
            <li><a title="Android.mk文件" href="15773673300273.html">Android.mk文件</a></li>
          

      
        <li class="divider"></li>
        <li><label>Android内核剖析</label></li>

          
            <li><a title="Framework概述" href="15747509659838.html">Framework概述</a></li>
          
            <li><a title="Binder" href="15747333089774.html">Binder</a></li>
          
            <li><a title="Framework的启动过程" href="15747331308712.html">Framework的启动过程</a></li>
          

      
        <li class="divider"></li>
        <li><label>深入理解Android</label></li>

          
            <li><a title="深入理解PackageManagerService" href="16008487631075.html">深入理解PackageManagerService</a></li>
          
            <li><a title="深入理解Surface系统" href="16007635680752.html">深入理解Surface系统</a></li>
          
            <li><a title="深入理解WindowManagerService" href="16007630337829.html">深入理解WindowManagerService</a></li>
          
            <li><a title="深入理解Android输入系统" href="16006883092534.html">深入理解Android输入系统</a></li>
          
            <li><a title="3. 连接Android和Linux内核的桥梁--Android的Bionic" href="15826096876760.html">3. 连接Android和Linux内核的桥梁--Android的Bionic</a></li>
          
            <li><a title="2.Android的编译环境--Build系统" href="15825987090516.html">2.Android的编译环境--Build系统</a></li>
          

      
        <li class="divider"></li>
        <li><label>Android开发工具</label></li>

          
            <li><a title="GPU呈现模式分析" href="16203574480848.html">GPU呈现模式分析</a></li>
          
            <li><a title="Android不透明度对应的16进制值" href="16109381219800.html">Android不透明度对应的16进制值</a></li>
          

      
        <li class="divider"></li>
        <li><label>架构</label></li>

          
            <li><a title="Android组件化架构" href="16212169719717.html">Android组件化架构</a></li>
          

      
        <li class="divider"></li>
        <li><label>Kotlin</label></li>

          
            <li><a title="Kotlin修饰符" href="16220176873496.html">Kotlin修饰符</a></li>
          
            <li><a title="Kotlin配置" href="16215019403387.html">Kotlin配置</a></li>
          
            <li><a title="Any和Object" href="16202922452879.html">Any和Object</a></li>
          
            <li><a title="注意事项" href="16054946011494.html">注意事项</a></li>
          
            <li><a title="函数" href="16050787660502.html">函数</a></li>
          
            <li><a title="集合框架" href="16050764808062.html">集合框架</a></li>
          
            <li><a title="区间" href="16050753339197.html">区间</a></li>
          
            <li><a title="数组" href="16050733875473.html">数组</a></li>
          
            <li><a title="基本类型数据" href="16050663211604.html">基本类型数据</a></li>
          

      
        <li class="divider"></li>
        <li><label>Git</label></li>

          
            <li><a title="git概述" href="15720062741897.html">git概述</a></li>
          
            <li><a title="Git按照功能来分类" href="15718356444970.html">Git按照功能来分类</a></li>
          
            <li><a title="Git常见用法" href="15607376634694.html">Git常见用法</a></li>
          

      
        <li class="divider"></li>
        <li><label>Java</label></li>

          
            <li><a title="Java线程池" href="16041633383721.html">Java线程池</a></li>
          
            <li><a title="Java线程" href="16041627017647.html">Java线程</a></li>
          
            <li><a title="Java深拷贝和浅拷贝" href="16041605743704.html">Java深拷贝和浅拷贝</a></li>
          
            <li><a title="Java异常" href="16041603866147.html">Java异常</a></li>
          
            <li><a title="RandomAccessFile" href="16041602871100.html">RandomAccessFile</a></li>
          
            <li><a title="Java IO" href="16041584305867.html">Java IO</a></li>
          
            <li><a title="LinkedHashMap" href="16041410387995.html">LinkedHashMap</a></li>
          
            <li><a title="TreeMap" href="16041410169042.html">TreeMap</a></li>
          
            <li><a title="HashMap" href="16041393802858.html">HashMap</a></li>
          
            <li><a title="LinkedList" href="16041386256783.html">LinkedList</a></li>
          
            <li><a title="ArrayList" href="16041374199121.html">ArrayList</a></li>
          
            <li><a title="Java集合类" href="16041330974013.html">Java集合类</a></li>
          
            <li><a title="杂记" href="15948431328032.html">杂记</a></li>
          
            <li><a title="Java的四种引用变量" href="15877076691357.html">Java的四种引用变量</a></li>
          
            <li><a title="MeasureSpec" href="15864726816307.html">MeasureSpec</a></li>
          
            <li><a title="Java小知识点" href="15777569350023.html">Java小知识点</a></li>
          

      
        <li class="divider"></li>
        <li><label>设计模式</label></li>

          
            <li><a title="设计模式概述" href="15783889880973.html">设计模式概述</a></li>
          
            <li><a title="UML(统一建模语言)" href="16230361480088.html">UML(统一建模语言)</a></li>
          
            <li><a title="单例模式" href="15897847467736.html">单例模式</a></li>
          
            <li><a title="代理模式" href="15900263250197.html">代理模式</a></li>
          
            <li><a title="建造者模式" href="15897849590411.html">建造者模式</a></li>
          
            <li><a title="工厂方法模式" href="15897849469753.html">工厂方法模式</a></li>
          
            <li><a title="简单工厂模式" href="15897849322436.html">简单工厂模式</a></li>
          
            <li><a title="简单工厂模式(Simple Factory)" href="15784035954571.html">简单工厂模式(Simple Factory)</a></li>
          

      
        <li class="divider"></li>
        <li><label>数据结构和算法</label></li>

          
            <li><a title="List及其子类" href="16038826600526.html">List及其子类</a></li>
          
            <li><a title="面试中的算法" href="15970860318982.html">面试中的算法</a></li>
          
            <li><a title="排序算法" href="15881272462871.html">排序算法</a></li>
          
            <li><a title="树" href="15881273285027.html">树</a></li>
          
            <li><a title="数据结构基础" href="15644690293137.html">数据结构基础</a></li>
          
            <li><a title="算法概述" href="15644655646063.html">算法概述</a></li>
          

      
        <li class="divider"></li>
        <li><label>网络爬虫</label></li>

          
            <li><a title="爬虫--基本库的使用" href="15660531164999.html">爬虫--基本库的使用</a></li>
          
            <li><a title="爬虫概述" href="15660114926379.html">爬虫概述</a></li>
          

      
        <li class="divider"></li>
        <li><label>计算机网络</label></li>

          
            <li><a title="图解HTTP--第一章--了解Web及网络基础" href="16023212652925.html">图解HTTP--第一章--了解Web及网络基础</a></li>
          
            <li><a title="图解HTTP--第九章--基于http的功能追加协议" href="15855764881285.html">图解HTTP--第九章--基于http的功能追加协议</a></li>
          
            <li><a title="图解HTTP--第八章--确认访问用户身份的认证" href="15855764130446.html">图解HTTP--第八章--确认访问用户身份的认证</a></li>
          
            <li><a title="图解HTTP--第七章--确保web安全的https" href="15855763389947.html">图解HTTP--第七章--确保web安全的https</a></li>
          
            <li><a title="图解HTTP--第六章--http首部" href="15855761102550.html">图解HTTP--第六章--http首部</a></li>
          
            <li><a title="图解HTTP--第五章--与HTTP协作的Web服务器" href="15855728450260.html">图解HTTP--第五章--与HTTP协作的Web服务器</a></li>
          
            <li><a title="图解HTTP--第四章--返回结果的http状态码" href="15855701437164.html">图解HTTP--第四章--返回结果的http状态码</a></li>
          
            <li><a title="图解HTTP--第三章--HTTP报文内的HTTP信息" href="15853911594446.html">图解HTTP--第三章--HTTP报文内的HTTP信息</a></li>
          
            <li><a title="图解HTTP--第二章--简单的HTTP协议" href="15853261274339.html">图解HTTP--第二章--简单的HTTP协议</a></li>
          
            <li><a title="TCP/IP" href="15852402680558.html">TCP/IP</a></li>
          
            <li><a title="HTTP和HTTPS" href="15850526868228.html">HTTP和HTTPS</a></li>
          
            <li><a title="计算机网络第五版--第二章" href="15849271154228.html">计算机网络第五版--第二章</a></li>
          
            <li><a title="计算机网络第五版--第一章" href="15846863033375.html">计算机网络第五版--第一章</a></li>
          
            <li><a title="ping命令" href="15832390905461.html">ping命令</a></li>
          
            <li><a title="基础" href="15650980568729.html">基础</a></li>
          

      
        <li class="divider"></li>
        <li><label>计算机基础</label></li>

          
            <li><a title="简单常识" href="15955796448880.html">简单常识</a></li>
          
            <li><a title="地图基础知识" href="15953376818758.html">地图基础知识</a></li>
          
            <li><a title="Java语言中注意事项" href="15906748975501.html">Java语言中注意事项</a></li>
          
            <li><a title="术语" href="15831479672487.html">术语</a></li>
          
            <li><a title="HTTP基本原理" href="15659232055748.html">HTTP基本原理</a></li>
          

      
        <li class="divider"></li>
        <li><label>Linux系统</label></li>

          
            <li><a title="基础简述" href="15719238641803.html">基础简述</a></li>
          

      
        <li class="divider"></li>
        <li><label>React-Native</label></li>

          
            <li><a title="ScrollView组件" href="15622306484069.html">ScrollView组件</a></li>
          
            <li><a title="组件的生命周期" href="15621446974979.html">组件的生命周期</a></li>
          
            <li><a title="TextInput组件" href="15621338635960.html">TextInput组件</a></li>
          
            <li><a title="遇到的问题" href="15620469922995.html">遇到的问题</a></li>
          
            <li><a title="组件" href="15617091937336.html">组件</a></li>
          
            <li><a title="React-Native零碎" href="15616187358724.html">React-Native零碎</a></li>
          
            <li><a title="react-navigation" href="15584071613702.html">react-navigation</a></li>
          

      
        <li class="divider"></li>
        <li><label>随想</label></li>

          
            <li><a title="整理的体系" href="16031941250957.html">整理的体系</a></li>
          
            <li><a title="需要后续查看的东西" href="15893692089911.html">需要后续查看的东西</a></li>
          
            <li><a title="to be a free man" href="15605804886383.html">to be a free man</a></li>
          
            <li><a title="for" href="15583472660662.html">for</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>Android Studio开发调试</span></li>
                        
                          <li><a title="jks和keystore的区别" href="16213263578694.html">jks和keystore的区别</a></li>
                        
                          <li><a title="UI Automator Viewer的使用" href="16139851951679.html">UI Automator Viewer的使用</a></li>
                        
                          <li><a title="查看Android Studio中使用的依赖库" href="16137935397183.html">查看Android Studio中使用的依赖库</a></li>
                        
                          <li><a title="查看签名文件内容" href="16062676480386.html">查看签名文件内容</a></li>
                        
                          <li><a title="使用TraceView" href="16001927395196.html">使用TraceView</a></li>
                        
                          <li><a title="Android Studio的Structure工具窗口" href="15979290265055.html">Android Studio的Structure工具窗口</a></li>
                        
                          <li><a title="使用tcpdump抓包" href="15966325912957.html">使用tcpdump抓包</a></li>
                        
                          <li><a title="Android Studio使用小技巧" href="15586135036171.html">Android Studio使用小技巧</a></li>
                        
                          <li><a title="编码习惯" href="15881280991297.html">编码习惯</a></li>
                        
                          <li><a title="Android Studio使用的插件" href="15747689633391.html">Android Studio使用的插件</a></li>
                        
                          <li><a title="Gradle知识" href="15873151730996.html">Gradle知识</a></li>
                        
                          <li><a title="APK文件结构以及优化APK的大小" href="15876077941240.html">APK文件结构以及优化APK的大小</a></li>
                        
                          <li><a title="Android Device Monitor工具" href="15955778686384.html">Android Device Monitor工具</a></li>
                        
                          <li><a title="Android Studio使用viewbinding" href="15927964749535.html">Android Studio使用viewbinding</a></li>
                        
                          <li><a title="Android Studio报的错误" href="15747589164365.html">Android Studio报的错误</a></li>
                        
                          <li><a title="设置代码信息模版" href="15686328305080.html">设置代码信息模版</a></li>
                        
                          <li><a title="ADB命令" href="15706865755803.html">ADB命令</a></li>
                        
                          <li><a title="使用ADB命令查看数据库数据·" href="15776895359955.html">使用ADB命令查看数据库数据·</a></li>
                        
                          <li><a title="AAPT命令" href="15706865946961.html">AAPT命令</a></li>
                        
                          <li><a title="SecureCRT工具使用" href="15744200819532.html">SecureCRT工具使用</a></li>
                        
                          <li><a title="Gradle和Gradle插件之间的版本关联" href="15663700347276.html">Gradle和Gradle插件之间的版本关联</a></li>
                        
                          <li><a title="Android将library打包成jar包或者aar文件" href="15777599008991.html">Android将library打包成jar包或者aar文件</a></li>
                        
                          <li><a title="build.gradle文件" href="15638732552597.html">build.gradle文件</a></li>
                        

                    
                      <li class="side-title"><span>四大组件及其相关类</span></li>
                        
                          <li><a title="Deep Links -- 深度链接" href="16208955206090.html">Deep Links -- 深度链接</a></li>
                        
                          <li><a title="Activity的状态保存和恢复" href="15994232717477.html">Activity的状态保存和恢复</a></li>
                        
                          <li><a title="View的滑动冲突" href="15991357742601.html">View的滑动冲突</a></li>
                        
                          <li><a title="View的滑动" href="15988921451098.html">View的滑动</a></li>
                        
                          <li><a title="Android的KeyEvent按键触摸事件传递机制" href="15984305843879.html">Android的KeyEvent按键触摸事件传递机制</a></li>
                        
                          <li><a title="自定义View和自定义ViewGroup中主要方法的执行顺序" href="15979224400729.html">自定义View和自定义ViewGroup中主要方法的执行顺序</a></li>
                        
                          <li><a title="自定义容器" href="15975164203980.html">自定义容器</a></li>
                        
                          <li><a title="自定义View" href="15966352005041.html">自定义View</a></li>
                        
                          <li><a title="AIDL" href="15965603616547.html">AIDL</a></li>
                        
                          <li><a title="View树的绘制流程" href="15961852523240.html">View树的绘制流程</a></li>
                        
                          <li><a title="Activity的组成结构" href="15961826101444.html">Activity的组成结构</a></li>
                        
                          <li><a title="Android数据存储" href="15925546637258.html">Android数据存储</a></li>
                        
                          <li><a title="Activity的启动流程" href="15913608813328.html">Activity的启动流程</a></li>
                        
                          <li><a title="安卓系统架构" href="15900311156878.html">安卓系统架构</a></li>
                        
                          <li><a title="多线程" href="15895247341993.html">多线程</a></li>
                        
                          <li><a title="View体系" href="15892159078168.html">View体系</a></li>
                        
                          <li><a title="四大组件的工作过程" href="15881609494140.html">四大组件的工作过程</a></li>
                        
                          <li><a title="Android IPC机制" href="15876457912729.html">Android IPC机制</a></li>
                        
                          <li><a title="Android数据序列化" href="15874843676808.html">Android数据序列化</a></li>
                        
                          <li><a title="Android的MotionEvent事件传递机制" href="15862769966851.html">Android的MotionEvent事件传递机制</a></li>
                        
                          <li><a title="SharedPreferences" href="15601718627780.html">SharedPreferences</a></li>
                        
                          <li><a title="Android简介" href="15834044312131.html">Android简介</a></li>
                        
                          <li><a title="Activity" href="15598792154683.html">Activity</a></li>
                        
                          <li><a title="安卓存储方式" href="15720050214610.html">安卓存储方式</a></li>
                        
                          <li><a title="Binder机制" href="15719000904205.html">Binder机制</a></li>
                        
                          <li><a title="安卓事件处理" href="15717946812357.html">安卓事件处理</a></li>
                        
                          <li><a title="Intent" href="15640232512188.html">Intent</a></li>
                        
                          <li><a title="ContentProvider--内容提供者" href="15603581865930.html">ContentProvider--内容提供者</a></li>
                        
                          <li><a title="Service--服务" href="15603581806506.html">Service--服务</a></li>
                        
                          <li><a title="BroadcastReceiver" href="15603581707523.html">BroadcastReceiver</a></li>
                        

                    
                      <li class="side-title"><span>Android组件</span></li>
                        
                          <li><a title="Adapter及其子类" href="15987345244709.html">Adapter及其子类</a></li>
                        
                          <li><a title="FloatingActionButton" href="15873151238128.html">FloatingActionButton</a></li>
                        
                          <li><a title="NavigationView" href="15873151137838.html">NavigationView</a></li>
                        
                          <li><a title="BottomSheetBehavior" href="15873151109302.html">BottomSheetBehavior</a></li>
                        
                          <li><a title="TabLayout" href="15873151075682.html">TabLayout</a></li>
                        
                          <li><a title="CollaspingToolbarLayout" href="15873150961844.html">CollaspingToolbarLayout</a></li>
                        
                          <li><a title="CoordinatorLayout" href="15873150855710.html">CoordinatorLayout</a></li>
                        
                          <li><a title="TextInputLayout" href="15873150854952.html">TextInputLayout</a></li>
                        
                          <li><a title="Snackbar" href="15873150711511.html">Snackbar</a></li>
                        
                          <li><a title="View（视图）" href="15587797736951.html">View（视图）</a></li>
                        
                          <li><a title="TextView" href="15584534943886.html">TextView</a></li>
                        
                          <li><a title="EditText" href="15587752872990.html">EditText</a></li>
                        
                          <li><a title="ImageView" href="15590447462728.html">ImageView</a></li>
                        
                          <li><a title="Button" href="15590305484634.html">Button</a></li>
                        
                          <li><a title="Toast" href="15832318775043.html">Toast</a></li>
                        
                          <li><a title="Spinner" href="15601388608282.html">Spinner</a></li>
                        
                          <li><a title="CheckBox和RadioButton" href="15601388701602.html">CheckBox和RadioButton</a></li>
                        
                          <li><a title="ProgressBar" href="15601389345357.html">ProgressBar</a></li>
                        
                          <li><a title="SeekBar" href="15832322241074.html">SeekBar</a></li>
                        
                          <li><a title="RatingBar" href="15832323147149.html">RatingBar</a></li>
                        
                          <li><a title="时间相关的控件" href="15832327057402.html">时间相关的控件</a></li>
                        
                          <li><a title="WebView" href="15601389648936.html">WebView</a></li>
                        
                          <li><a title="ListView" href="15590482064056.html">ListView</a></li>
                        
                          <li><a title="RecyclerView" href="15601389530971.html">RecyclerView</a></li>
                        
                          <li><a title="ScrollView和HorizontalView" href="15601389773513.html">ScrollView和HorizontalView</a></li>
                        
                          <li><a title="ViewPager" href="15601389699132.html">ViewPager</a></li>
                        
                          <li><a title="Fragment" href="15830020373441.html">Fragment</a></li>
                        
                          <li><a title="TabLayout" href="15639475255226.html">TabLayout</a></li>
                        
                          <li><a title="WheelView" href="15832330644393.html">WheelView</a></li>
                        
                          <li><a title="SwipeRefreshLayout" href="15607374213373.html">SwipeRefreshLayout</a></li>
                        
                          <li><a title="三大布局根控件" href="15832328030131.html">三大布局根控件</a></li>
                        
                          <li><a title="ConstraintLayout" href="15720053521924.html">ConstraintLayout</a></li>
                        
                          <li><a title="序" href="15584059143309.html">序</a></li>
                        

                    
                      <li class="side-title"><span>消息机制与存储</span></li>
                        
                          <li><a title="Thread" href="15941454444849.html">Thread</a></li>
                        
                          <li><a title="ThreadLocal类" href="15915526996179.html">ThreadLocal类</a></li>
                        
                          <li><a title="Message类" href="15915526938269.html">Message类</a></li>
                        
                          <li><a title="MessageQueue类" href="15915526852831.html">MessageQueue类</a></li>
                        
                          <li><a title="Handler类" href="15915526788145.html">Handler类</a></li>
                        
                          <li><a title="Looper类" href="15915526673284.html">Looper类</a></li>
                        
                          <li><a title="Android的消息机制--Handler消息机制" href="15887553843774.html">Android的消息机制--Handler消息机制</a></li>
                        
                          <li><a title="Handler消息机制" href="15681720095770.html">Handler消息机制</a></li>
                        

                    
                      <li class="side-title"><span>网络请求相关</span></li>
                        
                          <li><a title="Android 9.0 http网络请求问题" href="16204446832298.html">Android 9.0 http网络请求问题</a></li>
                        
                          <li><a title="PC端浏览器使用Http协议缓存" href="16032827867874.html">PC端浏览器使用Http协议缓存</a></li>
                        
                          <li><a title="HttpClient和HttpURLConnection" href="15897672365492.html">HttpClient和HttpURLConnection</a></li>
                        
                          <li><a title="网络相关" href="15616048657421.html">网络相关</a></li>
                        

                    
                      <li class="side-title"><span>Android功能</span></li>
                        
                          <li><a title="触摸事件" href="16221687313432.html">触摸事件</a></li>
                        
                          <li><a title="心跳包机制" href="16039934816197.html">心跳包机制</a></li>
                        
                          <li><a title="断点续传" href="16039920085823.html">断点续传</a></li>
                        
                          <li><a title="插件化" href="15832337513162.html">插件化</a></li>
                        
                          <li><a title="热修复" href="15832337461818.html">热修复</a></li>
                        
                          <li><a title="文件上传、下载、断点续传" href="15832337021510.html">文件上传、下载、断点续传</a></li>
                        
                          <li><a title="json/xml数据解析" href="15832336723066.html">json/xml数据解析</a></li>
                        
                          <li><a title="屏幕适配" href="15832335578226.html">屏幕适配</a></li>
                        
                          <li><a title="状态栏" href="15832335450787.html">状态栏</a></li>
                        
                          <li><a title="换肤" href="15832335396541.html">换肤</a></li>
                        
                          <li><a title="手势关闭" href="15832335221530.html">手势关闭</a></li>
                        
                          <li><a title="导航菜单" href="15832335120230.html">导航菜单</a></li>
                        
                          <li><a title="图表" href="15832335046878.html">图表</a></li>
                        
                          <li><a title="数据库" href="15832334917388.html">数据库</a></li>
                        
                          <li><a title="新手引导" href="15832334714220.html">新手引导</a></li>
                        
                          <li><a title="二维码和条形码" href="15832334567005.html">二维码和条形码</a></li>
                        
                          <li><a title="轮播图" href="15832334294029.html">轮播图</a></li>
                        
                          <li><a title="音视频" href="15832332927437.html">音视频</a></li>
                        
                          <li><a title="日志" href="15832038130305.html">日志</a></li>
                        
                          <li><a title="安卓系统设置" href="15794224269421.html">安卓系统设置</a></li>
                        
                          <li><a title="常用工具类和方法" href="15609277381914.html">常用工具类和方法</a></li>
                        
                          <li><a title="拍照和读取本地相册" href="15603979455589.html">拍照和读取本地相册</a></li>
                        
                          <li><a title="控制系统硬件功能" href="15603585084416.html">控制系统硬件功能</a></li>
                        

                    
                      <li class="side-title"><span>Android资源文件</span></li>
                        
                          <li><a title="特殊符号" href="16124972972718.html">特殊符号</a></li>
                        
                          <li><a title="推送机制" href="16012297259440.html">推送机制</a></li>
                        
                          <li><a title="Android插件框架机制" href="16012289364746.html">Android插件框架机制</a></li>
                        
                          <li><a title="64K方法数限制原理与解决方案" href="16012264048970.html">64K方法数限制原理与解决方案</a></li>
                        
                          <li><a title="地图基础知识" href="15953376818758.html">地图基础知识</a></li>
                        
                          <li><a title="Android 布局优化" href="15900636437169.html">Android 布局优化</a></li>
                        
                          <li><a title="Drawable文件" href="15832339330725.html">Drawable文件</a></li>
                        
                          <li><a title="异步消息处理线程" href="15744242463129.html">异步消息处理线程</a></li>
                        
                          <li><a title="Handler消息机制" href="15640230934557.html">Handler消息机制</a></li>
                        
                          <li><a title="内存泄漏" href="15638690144641.html">内存泄漏</a></li>
                        
                          <li><a title="画图" href="15627251763320.html">画图</a></li>
                        
                          <li><a title="反编译" href="15626395593984.html">反编译</a></li>
                        
                          <li><a title="assets资源" href="15608221314548.html">assets资源</a></li>
                        
                          <li><a title="Permissions权限" href="15597992631758.html">Permissions权限</a></li>
                        
                          <li><a title="res文件夹中的资源" href="15597050707116.html">res文件夹中的资源</a></li>
                        
                          <li><a title="动画" href="15591315255964.html">动画</a></li>
                        
                          <li><a title="Style和Theme" href="15591171572096.html">Style和Theme</a></li>
                        

                    
                      <li class="side-title"><span>安卓多媒体、图像</span></li>
                        
                          <li><a title="音频传输" href="16188902074852.html">音频传输</a></li>
                        
                          <li><a title="音频格式对比" href="16060934492693.html">音频格式对比</a></li>
                        
                          <li><a title="音频" href="16058388262225.html">音频</a></li>
                        
                          <li><a title="图片压缩" href="16032147433526.html">图片压缩</a></li>
                        
                          <li><a title="位图运算" href="15978627842395.html">位图运算</a></li>
                        
                          <li><a title="阴影和渐变" href="15978578322849.html">阴影和渐变</a></li>
                        
                          <li><a title="双缓存技术" href="15978446413433.html">双缓存技术</a></li>
                        
                          <li><a title="Canvas的clipXxx()方法" href="15977771825588.html">Canvas的clipXxx()方法</a></li>
                        
                          <li><a title="Canvas的坐标转换" href="15977752461748.html">Canvas的坐标转换</a></li>
                        
                          <li><a title="View的invalidate()方法" href="15977739560419.html">View的invalidate()方法</a></li>
                        
                          <li><a title="Canvas类和Paint类" href="15976921344218.html">Canvas类和Paint类</a></li>
                        
                          <li><a title="Bitmap类和BitmapDrawable类" href="15976898855375.html">Bitmap类和BitmapDrawable类</a></li>
                        
                          <li><a title="Rect类和RectF类" href="15976691326047.html">Rect类和RectF类</a></li>
                        
                          <li><a title="Point类和PointF类" href="15976663490288.html">Point类和PointF类</a></li>
                        
                          <li><a title="AudioManager" href="15960319990767.html">AudioManager</a></li>
                        
                          <li><a title="Android WebView和JavaScript的交互" href="15874899350106.html">Android WebView和JavaScript的交互</a></li>
                        
                          <li><a title="音视频相关" href="15635278413412.html">音视频相关</a></li>
                        
                          <li><a title="相机相关" href="15635278316611.html">相机相关</a></li>
                        

                    
                      <li class="side-title"><span>Jetpack</span></li>
                        
                          <li><a title="Jetpack" href="16231186943622.html">Jetpack</a></li>
                        
                          <li><a title="Lifecycle" href="16178717142947.html">Lifecycle</a></li>
                        
                          <li><a title="Navigation" href="16207856239934.html">Navigation</a></li>
                        

                    
                      <li class="side-title"><span>第三方库</span></li>
                        
                          <li><a title="Stetho" href="15632684758267.html">Stetho</a></li>
                        
                          <li><a title="LeakCanary" href="15632684640367.html">LeakCanary</a></li>
                        
                          <li><a title="Gson" href="15632684493835.html">Gson</a></li>
                        
                          <li><a title="支付" href="15632684444086.html">支付</a></li>
                        
                          <li><a title="推送" href="15632684365504.html">推送</a></li>
                        
                          <li><a title="二维码条形码库" href="15632683396317.html">二维码条形码库</a></li>
                        
                          <li><a title="RxJava" href="15632683277748.html">RxJava</a></li>
                        
                          <li><a title="SqlBright" href="15632683205618.html">SqlBright</a></li>
                        
                          <li><a title="GreenDao" href="15632683120036.html">GreenDao</a></li>
                        
                          <li><a title="Fresco" href="15632683056692.html">Fresco</a></li>
                        
                          <li><a title="Picasso" href="15632683006333.html">Picasso</a></li>
                        
                          <li><a title="Glide" href="15632682942973.html">Glide</a></li>
                        
                          <li><a title="ButterKnife" href="15632682824135.html">ButterKnife</a></li>
                        
                          <li><a title="EventBus" href="15632682766122.html">EventBus</a></li>
                        
                          <li><a title="Retrofit" href="15632682688049.html">Retrofit</a></li>
                        
                          <li><a title="OkHttp3" href="15632682616090.html">OkHttp3</a></li>
                        

                    
                      <li class="side-title"><span>Android系统相关</span></li>
                        
                          <li><a title="AMS" href="16202952165241.html">AMS</a></li>
                        
                          <li><a title="安卓热修复" href="16041750280944.html">安卓热修复</a></li>
                        
                          <li><a title="安卓性能优化" href="16041742389517.html">安卓性能优化</a></li>
                        
                          <li><a title="线程池" href="16037158072749.html">线程池</a></li>
                        
                          <li><a title="App的启动过程" href="16036390477812.html">App的启动过程</a></li>
                        
                          <li><a title="APK启动过程" href="16007836387351.html">APK启动过程</a></li>
                        
                          <li><a title="apk文件以及打包流程" href="16006415583476.html">apk文件以及打包流程</a></li>
                        
                          <li><a title="ANR以及解决方法以及捕获未捕获的异常" href="16002456845586.html">ANR以及解决方法以及捕获未捕获的异常</a></li>
                        
                          <li><a title="内存溢出和解决方法" href="16001927297660.html">内存溢出和解决方法</a></li>
                        
                          <li><a title="APK安装过程" href="15997078103768.html">APK安装过程</a></li>
                        
                          <li><a title="Scroller" href="15988136317147.html">Scroller</a></li>
                        
                          <li><a title="VelocityTracker类" href="15988105105264.html">VelocityTracker类</a></li>
                        
                          <li><a title="MotionEvent屏幕触摸事件分发流程" href="15983458791697.html">MotionEvent屏幕触摸事件分发流程</a></li>
                        
                          <li><a title="KeyEvent按键点击事件处理流程" href="15982890451497.html">KeyEvent按键点击事件处理流程</a></li>
                        
                          <li><a title="Binder" href="15982033025648.html">Binder</a></li>
                        
                          <li><a title="TelephonyManager.java" href="15970492312259.html">TelephonyManager.java</a></li>
                        
                          <li><a title="setContentView()" href="15954049156461.html">setContentView()</a></li>
                        
                          <li><a title="AsyncTask.java" href="15953888428518.html">AsyncTask.java</a></li>
                        
                          <li><a title="ListView设置Adapter和更新数据源码分析--观察者模式" href="15951954419377.html">ListView设置Adapter和更新数据源码分析--观察者模式</a></li>
                        
                          <li><a title="PackageManagerService.java" href="15948481287731.html">PackageManagerService.java</a></li>
                        
                          <li><a title="SystemServer.java" href="15948434761291.html">SystemServer.java</a></li>
                        
                          <li><a title="Android系统启动过程" href="15946404844407.html">Android系统启动过程</a></li>
                        
                          <li><a title="Context" href="15936928417691.html">Context</a></li>
                        
                          <li><a title="Window和WindowManager" href="15882183325715.html">Window和WindowManager</a></li>
                        
                          <li><a title="Manifest清单文件" href="15596519462062.html">Manifest清单文件</a></li>
                        

                    
                      <li class="side-title"><span>安卓源码</span></li>
                        
                          <li><a title="SystemClock类" href="16067889519707.html">SystemClock类</a></li>
                        
                          <li><a title="onUserInteraction()与onUserLeaveHint()" href="16003048093058.html">onUserInteraction()与onUserLeaveHint()</a></li>
                        
                          <li><a title="HandlerThread" href="16002981223383.html">HandlerThread</a></li>
                        
                          <li><a title="IntentService" href="16002980534244.html">IntentService</a></li>
                        
                          <li><a title="Scroller" href="15988136317147.html">Scroller</a></li>
                        
                          <li><a title="GestureDetector" href="15988119621841.html">GestureDetector</a></li>
                        
                          <li><a title="VelocityTracker类" href="15988105105264.html">VelocityTracker类</a></li>
                        
                          <li><a title="TelephonyManager.java" href="15970492312259.html">TelephonyManager.java</a></li>
                        
                          <li><a title="PackageManagerService.java" href="15948481287731.html">PackageManagerService.java</a></li>
                        
                          <li><a title="JNI调用机制" href="15719841747032.html">JNI调用机制</a></li>
                        
                          <li><a title="ComponentCallbacks和ComponentCallbacks2" href="15959378334016.html">ComponentCallbacks和ComponentCallbacks2</a></li>
                        
                          <li><a title="安卓源码目录结构分析" href="15713661513977.html">安卓源码目录结构分析</a></li>
                        
                          <li><a title="preloaded-classes" href="15717452568747.html">preloaded-classes</a></li>
                        

                    
                      <li class="side-title"><span>Framework</span></li>
                        
                          <li><a title="连接Android和Linux内核的桥梁——Android的Bionic" href="15796625335119.html">连接Android和Linux内核的桥梁——Android的Bionic</a></li>
                        
                          <li><a title="Android的编译环境--Build系统" href="15791618199796.html">Android的编译环境--Build系统</a></li>
                        
                          <li><a title="Android.mk文件" href="15773673300273.html">Android.mk文件</a></li>
                        

                    
                      <li class="side-title"><span>Android内核剖析</span></li>
                        
                          <li><a title="Framework概述" href="15747509659838.html">Framework概述</a></li>
                        
                          <li><a title="Binder" href="15747333089774.html">Binder</a></li>
                        
                          <li><a title="Framework的启动过程" href="15747331308712.html">Framework的启动过程</a></li>
                        

                    
                      <li class="side-title"><span>深入理解Android</span></li>
                        
                          <li><a title="深入理解PackageManagerService" href="16008487631075.html">深入理解PackageManagerService</a></li>
                        
                          <li><a title="深入理解Surface系统" href="16007635680752.html">深入理解Surface系统</a></li>
                        
                          <li><a title="深入理解WindowManagerService" href="16007630337829.html">深入理解WindowManagerService</a></li>
                        
                          <li><a title="深入理解Android输入系统" href="16006883092534.html">深入理解Android输入系统</a></li>
                        
                          <li><a title="3. 连接Android和Linux内核的桥梁--Android的Bionic" href="15826096876760.html">3. 连接Android和Linux内核的桥梁--Android的Bionic</a></li>
                        
                          <li><a title="2.Android的编译环境--Build系统" href="15825987090516.html">2.Android的编译环境--Build系统</a></li>
                        

                    
                      <li class="side-title"><span>Android开发工具</span></li>
                        
                          <li><a title="GPU呈现模式分析" href="16203574480848.html">GPU呈现模式分析</a></li>
                        
                          <li><a title="Android不透明度对应的16进制值" href="16109381219800.html">Android不透明度对应的16进制值</a></li>
                        

                    
                      <li class="side-title"><span>架构</span></li>
                        
                          <li><a title="Android组件化架构" href="16212169719717.html">Android组件化架构</a></li>
                        

                    
                      <li class="side-title"><span>Kotlin</span></li>
                        
                          <li><a title="Kotlin修饰符" href="16220176873496.html">Kotlin修饰符</a></li>
                        
                          <li><a title="Kotlin配置" href="16215019403387.html">Kotlin配置</a></li>
                        
                          <li><a title="Any和Object" href="16202922452879.html">Any和Object</a></li>
                        
                          <li><a title="注意事项" href="16054946011494.html">注意事项</a></li>
                        
                          <li><a title="函数" href="16050787660502.html">函数</a></li>
                        
                          <li><a title="集合框架" href="16050764808062.html">集合框架</a></li>
                        
                          <li><a title="区间" href="16050753339197.html">区间</a></li>
                        
                          <li><a title="数组" href="16050733875473.html">数组</a></li>
                        
                          <li><a title="基本类型数据" href="16050663211604.html">基本类型数据</a></li>
                        

                    
                      <li class="side-title"><span>Git</span></li>
                        
                          <li><a title="git概述" href="15720062741897.html">git概述</a></li>
                        
                          <li><a title="Git按照功能来分类" href="15718356444970.html">Git按照功能来分类</a></li>
                        
                          <li><a title="Git常见用法" href="15607376634694.html">Git常见用法</a></li>
                        

                    
                      <li class="side-title"><span>Java</span></li>
                        
                          <li><a title="Java线程池" href="16041633383721.html">Java线程池</a></li>
                        
                          <li><a title="Java线程" href="16041627017647.html">Java线程</a></li>
                        
                          <li><a title="Java深拷贝和浅拷贝" href="16041605743704.html">Java深拷贝和浅拷贝</a></li>
                        
                          <li><a title="Java异常" href="16041603866147.html">Java异常</a></li>
                        
                          <li><a title="RandomAccessFile" href="16041602871100.html">RandomAccessFile</a></li>
                        
                          <li><a title="Java IO" href="16041584305867.html">Java IO</a></li>
                        
                          <li><a title="LinkedHashMap" href="16041410387995.html">LinkedHashMap</a></li>
                        
                          <li><a title="TreeMap" href="16041410169042.html">TreeMap</a></li>
                        
                          <li><a title="HashMap" href="16041393802858.html">HashMap</a></li>
                        
                          <li><a title="LinkedList" href="16041386256783.html">LinkedList</a></li>
                        
                          <li><a title="ArrayList" href="16041374199121.html">ArrayList</a></li>
                        
                          <li><a title="Java集合类" href="16041330974013.html">Java集合类</a></li>
                        
                          <li><a title="杂记" href="15948431328032.html">杂记</a></li>
                        
                          <li><a title="Java的四种引用变量" href="15877076691357.html">Java的四种引用变量</a></li>
                        
                          <li><a title="MeasureSpec" href="15864726816307.html">MeasureSpec</a></li>
                        
                          <li><a title="Java小知识点" href="15777569350023.html">Java小知识点</a></li>
                        

                    
                      <li class="side-title"><span>设计模式</span></li>
                        
                          <li><a title="设计模式概述" href="15783889880973.html">设计模式概述</a></li>
                        
                          <li><a title="UML(统一建模语言)" href="16230361480088.html">UML(统一建模语言)</a></li>
                        
                          <li><a title="单例模式" href="15897847467736.html">单例模式</a></li>
                        
                          <li><a title="代理模式" href="15900263250197.html">代理模式</a></li>
                        
                          <li><a title="建造者模式" href="15897849590411.html">建造者模式</a></li>
                        
                          <li><a title="工厂方法模式" href="15897849469753.html">工厂方法模式</a></li>
                        
                          <li><a title="简单工厂模式" href="15897849322436.html">简单工厂模式</a></li>
                        
                          <li><a title="简单工厂模式(Simple Factory)" href="15784035954571.html">简单工厂模式(Simple Factory)</a></li>
                        

                    
                      <li class="side-title"><span>数据结构和算法</span></li>
                        
                          <li><a title="List及其子类" href="16038826600526.html">List及其子类</a></li>
                        
                          <li><a title="面试中的算法" href="15970860318982.html">面试中的算法</a></li>
                        
                          <li><a title="排序算法" href="15881272462871.html">排序算法</a></li>
                        
                          <li><a title="树" href="15881273285027.html">树</a></li>
                        
                          <li><a title="数据结构基础" href="15644690293137.html">数据结构基础</a></li>
                        
                          <li><a title="算法概述" href="15644655646063.html">算法概述</a></li>
                        

                    
                      <li class="side-title"><span>网络爬虫</span></li>
                        
                          <li><a title="爬虫--基本库的使用" href="15660531164999.html">爬虫--基本库的使用</a></li>
                        
                          <li><a title="爬虫概述" href="15660114926379.html">爬虫概述</a></li>
                        

                    
                      <li class="side-title"><span>计算机网络</span></li>
                        
                          <li><a title="图解HTTP--第一章--了解Web及网络基础" href="16023212652925.html">图解HTTP--第一章--了解Web及网络基础</a></li>
                        
                          <li><a title="图解HTTP--第九章--基于http的功能追加协议" href="15855764881285.html">图解HTTP--第九章--基于http的功能追加协议</a></li>
                        
                          <li><a title="图解HTTP--第八章--确认访问用户身份的认证" href="15855764130446.html">图解HTTP--第八章--确认访问用户身份的认证</a></li>
                        
                          <li><a title="图解HTTP--第七章--确保web安全的https" href="15855763389947.html">图解HTTP--第七章--确保web安全的https</a></li>
                        
                          <li><a title="图解HTTP--第六章--http首部" href="15855761102550.html">图解HTTP--第六章--http首部</a></li>
                        
                          <li><a title="图解HTTP--第五章--与HTTP协作的Web服务器" href="15855728450260.html">图解HTTP--第五章--与HTTP协作的Web服务器</a></li>
                        
                          <li><a title="图解HTTP--第四章--返回结果的http状态码" href="15855701437164.html">图解HTTP--第四章--返回结果的http状态码</a></li>
                        
                          <li><a title="图解HTTP--第三章--HTTP报文内的HTTP信息" href="15853911594446.html">图解HTTP--第三章--HTTP报文内的HTTP信息</a></li>
                        
                          <li><a title="图解HTTP--第二章--简单的HTTP协议" href="15853261274339.html">图解HTTP--第二章--简单的HTTP协议</a></li>
                        
                          <li><a title="TCP/IP" href="15852402680558.html">TCP/IP</a></li>
                        
                          <li><a title="HTTP和HTTPS" href="15850526868228.html">HTTP和HTTPS</a></li>
                        
                          <li><a title="计算机网络第五版--第二章" href="15849271154228.html">计算机网络第五版--第二章</a></li>
                        
                          <li><a title="计算机网络第五版--第一章" href="15846863033375.html">计算机网络第五版--第一章</a></li>
                        
                          <li><a title="ping命令" href="15832390905461.html">ping命令</a></li>
                        
                          <li><a title="基础" href="15650980568729.html">基础</a></li>
                        

                    
                      <li class="side-title"><span>计算机基础</span></li>
                        
                          <li><a title="简单常识" href="15955796448880.html">简单常识</a></li>
                        
                          <li><a title="地图基础知识" href="15953376818758.html">地图基础知识</a></li>
                        
                          <li><a title="Java语言中注意事项" href="15906748975501.html">Java语言中注意事项</a></li>
                        
                          <li><a title="术语" href="15831479672487.html">术语</a></li>
                        
                          <li><a title="HTTP基本原理" href="15659232055748.html">HTTP基本原理</a></li>
                        

                    
                      <li class="side-title"><span>Linux系统</span></li>
                        
                          <li><a title="基础简述" href="15719238641803.html">基础简述</a></li>
                        

                    
                      <li class="side-title"><span>React-Native</span></li>
                        
                          <li><a title="ScrollView组件" href="15622306484069.html">ScrollView组件</a></li>
                        
                          <li><a title="组件的生命周期" href="15621446974979.html">组件的生命周期</a></li>
                        
                          <li><a title="TextInput组件" href="15621338635960.html">TextInput组件</a></li>
                        
                          <li><a title="遇到的问题" href="15620469922995.html">遇到的问题</a></li>
                        
                          <li><a title="组件" href="15617091937336.html">组件</a></li>
                        
                          <li><a title="React-Native零碎" href="15616187358724.html">React-Native零碎</a></li>
                        
                          <li><a title="react-navigation" href="15584071613702.html">react-navigation</a></li>
                        

                    
                      <li class="side-title"><span>随想</span></li>
                        
                          <li><a title="整理的体系" href="16031941250957.html">整理的体系</a></li>
                        
                          <li><a title="需要后续查看的东西" href="15893692089911.html">需要后续查看的东西</a></li>
                        
                          <li><a title="to be a free man" href="15605804886383.html">to be a free man</a></li>
                        
                          <li><a title="for" href="15583472660662.html">for</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>自定义View</h1>

<ul>
<li>
<a href="#toc_0">简介</a>
</li>
<li>
<a href="#toc_1">自定义组件的基本结构</a>
</li>
<li>
<a href="#toc_2">重写onMeasure()方法</a>
</li>
<li>
<a href="#toc_3">组件属性</a>
<ul>
<li>
<a href="#toc_4">自定义属性基础</a>
</li>
<li>
<a href="#toc_5">自定义属性使用</a>
</li>
<li>
<a href="#toc_6">读取来自style和theme中的属性</a>
</li>
</ul>
</li>
<li>
<a href="#toc_7">重写onDraw()方法</a>
</li>
</ul>


<p><em><font color=red>参考 Android 8.0 源码</font></em></p>

<h2 id="toc_0">简介</h2>

<p>&emsp;&emsp;通常来说，自定义组件有三种定义方式：</p>

<ul>
<li>从零开始定义自定义组件，组件类继承自View；</li>
<li>从已有组件进行扩展，比如继承自ImageView扩展出符合功能需求的组件；</li>
<li>将多个已有组件组合成一个新的组件，比如侧边带字母索引的ListView；</li>
</ul>

<h2 id="toc_1">自定义组件的基本结构</h2>

<p>&emsp;&emsp;组件主要由两部分构成：组件类和属性定义；<br/>
&emsp;&emsp;创建自定义组件类最基本的做法就是继承自类View，其中，有三个构造方法和两个重写的方法很重要；</p>

<pre class="line-numbers"><code class="language-java">public class CustomFirstView extends View {

    public CustomFirstView(Context context) {
        super(context);
    }

    public CustomFirstView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomFirstView(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
    }

}
</code></pre>

<p>&emsp;&emsp;我们定义了一个CustomFirst类，该类继承自View，我们为该类定义了三个构造方法并重写了另外两个方法；</p>

<ul>
<li>构造方法：</li>
</ul>

<pre class="line-numbers"><code class="language-java">public CustomFirstView(Context context) {
    super(context);
}

public CustomFirstView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public CustomFirstView(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
}
</code></pre>

<p>&emsp;&emsp;这三个构造方法的调用场景不一样。第一个只有一个参数，在代码中创建组件时会调用该构造方法，比如创建一个按钮：</p>

<pre class="line-numbers"><code class="language-java">Button button = new Button(context);
</code></pre>

<p>第二个方法在layout布局文件中使用时调用，参数attrs表示当前配置中的属性集合，例如在xxx_layout.xml中定义一个按钮，安卓会调用第二个构造方法Inflate出Button对象；</p>

<pre class="line-numbers"><code class="language-java">&lt;Button android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:text=&quot;get&quot;
/&gt;
</code></pre>

<p>第三个构造方法是不会自动调用的，当我们在Theme中定义了Style属性时，通常会在第三个构造方法中手动调用；</p>

<ul>
<li>绘图方法：</li>
</ul>

<pre class="line-numbers"><code class="language-java">@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
}
</code></pre>

<p>&emsp;&emsp;用于显示组件的外观，最终的显示结果需要通过Canvas绘制出来。在View类中，该方法没有默认的实现。</p>

<ul>
<li>测量方法</li>
</ul>

<pre class="line-numbers"><code class="language-java">@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
}
</code></pre>

<p>&emsp;&emsp;这是一个protected方法，意味着该方法主要用于子类的重写和扩展。如果不重写该方法，父类View有自己默认的实现。在Android中，自定义组件的大小都由自身通过onMeasure()方法进行测量。</p>

<h2 id="toc_2">重写onMeasure()方法</h2>

<p>&emsp;&emsp;View类对于onMeasure()方法有自己的默认实现。</p>

<pre class="line-numbers"><code class="language-java">protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec),
    getDefaultSize(getSuggestedMinimumHeight(),heightMeasureSpec));
}
</code></pre>

<p>&emsp;&emsp;在该方法中，调用了setMeasuredDimension()方法实现应用测量后的高度和宽度，这是必须调用的。这样以后，我们可以调用getMeasuredWidth()和getMeasuredHeight()方法来获取宽度和高度值。</p>

<p>&emsp;&emsp;在大部分情况下，onMeasure()方法都要重写，用于计算组件的宽度值和高度值。定义组件时，必须指定android:layout_width和android:layout_height属性，属性值有三种情况：match_parent、wrap_content、具体值。match_parent表示组件的大小跟随父容器，所在的容器有多大，组件就有多大；wrap_content表示组件的大小由内容决定，比如TextView组件的大小由文字的多少来决定，ImageView组件的大小由图片的大小来决定；如果是一个具体值，直接指定就可以了，单位是dp。</p>

<p>&emsp;&emsp;总体来说，不管是宽度还是高度，都包含了两个信息：模式和大小。模式可能是match_parent、wrap_content、具体值的任意一种，大小则是需要根据不同的模式来进行计算的。其实，match_parent也是一个确定了的具体值。因为match_parent的大小跟随父容器，而容器本身也是一个组件，它会算出自己的大小，所以不需要我们去重复计算了，父容器多大，组件就有多大，View的绘制流程会自动将父容器计算好的大小通过参数传过来的。</p>

<p>&emsp;&emsp;模式使用三个不同的常量来区别：<br/>
1 . MeasureSpec.EXACTLY:<br/>
&emsp;&emsp;当组件的尺寸指定为match_parent或具体值时，用该常量代表这种尺寸模式。处于该模式的组件尺寸已经是测量过的值，不需要进行计算。<br/>
2 . MeasureSpec.AT_MOST:<br/>
&emsp;&emsp;当组件的尺寸指定为wrap_content时，用该常量表示，因为尺寸大小和内容有关，所以，我们要根据组件内的内容来测量组件的宽度和高度。比如TextView中的text属性字符串越长，宽度和高度就可能越大。<br/>
3 . MeasureSpec.UNSPECIFIED:<br/>
&emsp;&emsp;未指定尺寸，这种情况不多，一般情况下，父控件为AdapterView时，通过measure方法传入。</p>

<p>&emsp;&emsp;获取当前组件的尺寸模式和尺寸大小：<br/>
&emsp;&emsp;在onMeasure()方法的参数中，参数widthMeasureSpec和heightMeasureSpec看起来只是两个整数，其实每个参数都包含了两个值：模式和尺寸。int类型占用4个字节，每个字节8位，一共32位。参数widthMeasureSpec和heightMeasureSpec的前2位代表模式，后30位则表示大小。<br/>
&emsp;&emsp;获取widthMeasureSpec和heightMeasureSpec的前2位与后30位，通过位运算符就可以得到。下面以widthMeasureSpec为例：</p>

<pre class="line-numbers"><code class="language-java">//获取尺寸模式；
widthMeasureSpec &amp; 0x3 &lt;&lt; 30

//获取尺寸大小；
widthMeasureSpec &lt;&lt; 2 &gt;&gt; 2; 
</code></pre>

<p>&emsp;&emsp;View类的内部类MeasureSpec类中提供了两个方法来获取模式和大小：</p>

<pre class="line-numbers"><code class="language-java">//获取模式;
int mode = MeasureSpec.getMode(widthMeasureSpec);

//获取大小;
int size = MeasureSpec.getSize(widthMeasureSpec);
</code></pre>

<p>&emsp;&emsp;下面举例来说明onMeasure()方法的实现思路：</p>

<pre class="line-numbers"><code class="language-java">public class CustomFirstView extends View {

    public CustomFirstView(Context context) {
        super(context);
    }

    public CustomFirstView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomFirstView(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
//        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        int width = measureWidth(widthMeasureSpec);
        int height = measureHeight(heightMeasureSpec);
        setMeasuredDimension(width, height);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
    }

    private int measureWidth(int widthMeasureSpec) {
        int mode = MeasureSpec.getMode(widthMeasureSpec);
        int size = MeasureSpec.getSize(widthMeasureSpec);
        int width = 0;
        switch (mode) {
            case MeasureSpec.EXACTLY:
                //宽度为match_parent或者具体值时，直接将size作为组件的宽度；
                width = size;
                break;
            case MeasureSpec.AT_MOST:
                //宽度为wrap_content，宽度需要计算。也就是在这里要根据具体的业务实现来设置宽度值；
                break;
            case MeasureSpec.UNSPECIFIED:
                break;
        }
        return width;
    }

    private int measureHeight(int heightMeasureSpec) {
        int mode = MeasureSpec.getMode(heightMeasureSpec);
        int size = MeasureSpec.getSize(heightMeasureSpec);
        int height = 0;

        switch (mode) {
            case MeasureSpec.EXACTLY:
                //高度为match_parent或者具体值时，直接将size作为组件的高度；
                height = size;
                break;
            case MeasureSpec.AT_MOST:
                //高度为wrap_content，高度值需要计算。也就是在这里要根据具体的业务实现来设置高度值；
                break;
            case MeasureSpec.UNSPECIFIED:
                break;
        }
        return height;
    }

}
</code></pre>

<h2 id="toc_3">组件属性</h2>

<p>&emsp;&emsp;在上面的例子中，我们把要显示的文本定义为了常量，在实际中，这是不可取的，我们应该可以随意定义文本信息，这就需要我们来设置组件的属性了。</p>

<h3 id="toc_4">自定义属性基础</h3>

<p>&emsp;&emsp;安卓系统定义的属性在源码/framework/base/core/res/res/values/attrs.xml文件中。</p>

<p>&emsp;&emsp;自定义属性主要有以下几个步骤：<br/>
1 . 在res/values/attrs.xml文件中为指定组件定义decalre-styleable标记，并将所有的属性都定义在该标记中；<br/>
2 . 在layout文件中使用自定义属性；<br/>
3 . 在组件类的构造方法中读取属性值；</p>

<p>&emsp;&emsp;在res/values目录下，创建attrs.xml文件，内容大概如下：</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;CustomFirstView&quot;&gt;
    &lt;attr name=&quot;&quot; format=&quot;&quot;/&gt;
&lt;/declare-styleable&gt;
</code></pre>

<p>&emsp;&emsp;组件的属性都应该定义在declare-styleable标记中，该标记的name属性值一般来说都是组件类的名称（上面代码中是CustomFirstView），也可以取别的名字，但是一般我们会取组件名。组件的属性都定义在declare-styleable标记内，成为declare-styleable标记的子标记，每个属性由两部分组成--属性名和属性类型。属性通过attr来标识，属性名为name，属性类型为format。属性类型有如下所示：</p>

<table>
<thead>
<tr>
<th>属性类型</th>
<th>解释</th>
</tr>
</thead>

<tbody>
</tbody>
</table>

<p>1 . string:字符串</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;TextView&quot;&gt;
    &lt;attr name=&quot;text&quot; format=&quot;string&quot; localization=&quot;suggested&quot; /&gt;
    &lt;attr name=&quot;hint&quot; format=&quot;string&quot; /&gt;
&lt;/declare-styleable&gt;
</code></pre>

<pre class="line-numbers"><code class="language-java">android:text=&quot;hello world&quot;
</code></pre>

<p>2 . boolean:布尔值</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;TextView&quot;&gt;
    &lt;attr name=&quot;singleLine&quot; format=&quot;boolean&quot; /&gt;
&lt;/declare-styleable&gt;
</code></pre>

<pre class="line-numbers"><code class="language-java">android:singleLine=&quot;true&quot;
</code></pre>

<p>3 . color:颜色</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;View&quot;&gt;
    &lt;attr name=&quot;background&quot; format=&quot;reference|color&quot; /&gt;
&lt;/declare-styleable&gt;
</code></pre>

<pre class="line-numbers"><code class="language-java">android:background=&quot;#123456&quot;

android:background=&quot;@color/colorPrimary&quot;
</code></pre>

<p>4 . dimension：尺寸，可以带单位，比如长度通常为dp，字体大小通常为sp；</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;ViewGroup_Layout&quot;&gt;
    &lt;attr name=&quot;layout_width&quot; format=&quot;dimension&quot;&gt;
        &lt;enum name=&quot;fill_parent&quot; value=&quot;-1&quot; /&gt;
        &lt;enum name=&quot;match_parent&quot; value=&quot;-1&quot; /&gt;
        &lt;enum name=&quot;wrap_content&quot; value=&quot;-2&quot; /&gt;
    &lt;/attr&gt;
&lt;/declare-styleable&gt;

&lt;declare-styleable name=&quot;ViewGroup_MarginLayout&quot;&gt;
    &lt;attr name=&quot;layout_marginLeft&quot; format=&quot;dimension&quot;  /&gt;
&lt;/declare-styleable&gt;    
</code></pre>

<pre class="line-numbers"><code class="language-java">android:layout_width=&quot;match_parent&quot;

android:layout_width=&quot;20dp&quot;

android:layout_marginLeft=&quot;30dp&quot;
</code></pre>

<p>5 . enum：枚举值，需要在attr标记中使用<enum>标记定义枚举值，例如sex作为性别，有两个枚举值：MALE和FEMALE；</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;Theme&quot;&gt;
    &lt;attr name=&quot;orientation&quot;&gt;
        &lt;enum name=&quot;horizontal&quot; value=&quot;0&quot; /&gt;
        &lt;enum name=&quot;vertical&quot; value=&quot;1&quot; /&gt;
    &lt;/attr&gt;
&lt;/declare-styleable&gt;
</code></pre>

<pre class="line-numbers"><code class="language-java">android:orientation=&quot;vertical&quot;
</code></pre>

<p>6 . flag：标识位，常见的gravity属性就是该类型。flag类型的属性也有一个子标记<flag>；</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;Theme&quot;&gt;
    &lt;attr name=&quot;gravity&quot;&gt;
        &lt;flag name=&quot;top&quot; value=&quot;0x30&quot; /&gt;
        &lt;flag name=&quot;bottom&quot; value=&quot;0x50&quot; /&gt;
        &lt;flag name=&quot;left&quot; value=&quot;0x03&quot; /&gt;
        &lt;flag name=&quot;right&quot; value=&quot;0x05&quot; /&gt;
        &lt;flag name=&quot;center_vertical&quot; value=&quot;0x10&quot; /&gt;
        &lt;flag name=&quot;fill_vertical&quot; value=&quot;0x70&quot; /&gt;
        &lt;flag name=&quot;center_horizontal&quot; value=&quot;0x01&quot; /&gt;
        &lt;flag name=&quot;fill_horizontal&quot; value=&quot;0x07&quot; /&gt;
        &lt;flag name=&quot;center&quot; value=&quot;0x11&quot; /&gt;
        &lt;flag name=&quot;fill&quot; value=&quot;0x77&quot; /&gt;
        &lt;flag name=&quot;clip_vertical&quot; value=&quot;0x80&quot; /&gt;
        &lt;flag name=&quot;clip_horizontal&quot; value=&quot;0x08&quot; /&gt;
        &lt;flag name=&quot;start&quot; value=&quot;0x00800003&quot; /&gt;
        &lt;flag name=&quot;end&quot; value=&quot;0x00800005&quot; /&gt;
    &lt;/attr&gt;
&lt;/declare-styleable&gt;
</code></pre>

<pre class="line-numbers"><code class="language-java">android:gravity=&quot;center&quot;
</code></pre>

<p>7.float：浮点数</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;View&quot;&gt;
    &lt;attr name=&quot;alpha&quot; format=&quot;float&quot; /&gt;    
&lt;/declare-styleable&gt;
</code></pre>

<pre class="line-numbers"><code class="language-java">android:alpha=&quot;0.3&quot;
</code></pre>

<p>8 . fraction：百分数，在动画资源<scale>、<rotate>等标记中，fromX、fromY等属性就是fraction类型的属性；</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;RotateDrawable&quot;&gt;
    &lt;attr name=&quot;pivotX&quot; format=&quot;float|fraction&quot; /&gt;
    &lt;attr name=&quot;pivotY&quot; format=&quot;float|fraction&quot; /&gt;
&lt;/declare-styleable&gt;
</code></pre>

<pre class="line-numbers"><code class="language-java">android:pivotX=&quot;30%&quot;
android:pivotY=&quot;50%&quot;
</code></pre>

<p>9 . integer：整数</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;GridView&quot;&gt;
    &lt;attr name=&quot;numColumns&quot; format=&quot;integer&quot; min=&quot;0&quot;&gt;
&lt;/declare-styleable&gt;
</code></pre>

<pre class="line-numbers"><code class="language-java">android:numColumns=&quot;4&quot;
</code></pre>

<p>9 . reference：引用，引用另一个资源，比如android:paddingRight=&quot;@dimen/activity_margin&quot;就是引用了一个尺寸资源；</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;RelativeLayout_Layout&quot;&gt;
    &lt;attr name=&quot;layout_toLeftOf&quot; format=&quot;reference&quot; /&gt;
&lt;/declare-styleable&gt;
</code></pre>

<pre class="line-numbers"><code class="language-java">android:layout_toLeftOf=&quot;@id/time_tv&quot;
</code></pre>

<h3 id="toc_5">自定义属性使用</h3>

<p>&emsp;&emsp;我们在attrs.xml文件中定义我们要用的属性，如下：</p>

<pre class="line-numbers"><code class="language-java">&lt;declare-styleable name=&quot;CustomFirstView&quot;&gt;
    &lt;attr name=&quot;text&quot; format=&quot;string&quot;/&gt;
&lt;/declare-styleable&gt;
</code></pre>

<p>&emsp;&emsp;定义好我们需要的属性的名称和类型后，属性就可以在layout文件中使用了。这里需要注意的是：首先要在layout文件中定义好属性的命名空间（xmlns）。默认情况下，xml文件中的根元素的命名空间如下：</p>

<pre class="line-numbers"><code class="language-java">xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
</code></pre>

<p>&emsp;&emsp;默认的命名空间是&quot;android&quot;，是由上面这一行代码决定的。对于自定义属性来说，必须定义为其他的命名空间，且有一定的要求：</p>

<pre class="line-numbers"><code class="language-java">xmlns:kang=&quot;http://schemas.android.com/apk/res-auto&quot;
</code></pre>

<p>&emsp;&emsp;在上面这一行代码中，其中kang是自定义的命名空间，也可以使用其他值来代替。后面的<a href="http://schemas.android.com/apk/res-auto%E6%98%AF%E5%9B%BA%E5%AE%9A%E7%9A%84%EF%BC%8C%E6%9C%89%E4%BA%86%E8%BF%99%E4%B8%AA%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E4%BB%A5%E5%90%8E%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%89%8D%E9%9D%A2%E5%9C%A8attrs.xml%E5%AE%9A%E4%B9%89%E7%9A%84text%E5%B1%9E%E6%80%A7%EF%BC%8C%E5%B0%B1%E5%BA%94%E8%AF%A5%E8%BF%99%E6%A0%B7%E7%94%A8">http://schemas.android.com/apk/res-auto是固定的，有了这个命名空间以后，使用前面在attrs.xml定义的text属性，就应该这样用</a>:</p>

<pre class="line-numbers"><code class="language-java">kang:text=&quot;hello world&quot;
</code></pre>

<p>&emsp;&emsp;目前，我们使用Android Studio，一般在layout文件中生成根元素的时候，就会自动生成xmlns:app=&quot;<a href="http://schemas.android.com/apk/res-auto%22%E8%BF%99%E4%B8%80%E5%8F%A5%E4%BB%A3%E7%A0%81%EF%BC%8C%E6%88%91%E4%BB%AC%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8app%E8%BF%99%E4%B8%AA%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E4%BA%86%EF%BC%8C%E4%B9%9F%E5%B0%B1%E4%B8%8D%E9%9C%80%E8%A6%81%E5%86%8D%E8%87%AA%E5%AE%9A%E4%B9%89%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E4%BA%86%E3%80%82">http://schemas.android.com/apk/res-auto&quot;这一句代码，我们就可以直接使用app这个命名空间了，也就不需要再自定义命名空间了。</a></p>

<pre class="line-numbers"><code class="language-java">xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
</code></pre>

<p>&emsp;&emsp;接下来，我们需要在CustomFirstView中读取app:text属性。组件运行后，所有属性都将保存在AttributeSet集合中并通过构造方法传入，我们通过TypedArray可以读取出指定的属性值。</p>

<pre class="line-numbers"><code class="language-java">private String customText;

public CustomFirstView(Context context, AttributeSet attrs) {
    super(context, attrs);
    //读取属性值;
    TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.CustomFirstView);
    customText = typedArray.getString(R.styleable.CustomFirstView_customText);
    typedArray.recycle();
}
</code></pre>

<p>&emsp;&emsp;TypedArray typedArray = context.obtainStyleAttributes(attrs,R.style.CustomFirstView)中参数R.style.CustomFirstView是我们在attrs.xml文件中<declare-styleable name="CustomFirstView">配置中的name值，TypedArray对象的getString()方法用于读取特定属性的值，在这里读取的R.styleable.CustomFirstView_text是指我们在attrs.xml文件中配置的text属性。TypedArray类中定义了很多getXxx()方法，getXxx()中Xxx代表对应属性的类型，比如getInt()、getColor()等。有些getXxx()方法有两个参数，第二个参数通常是指默认值。最后，需要调用TypedArray的recycle()方法释放资源。</p>

<p>&emsp;&emsp;到此，整个CustomFirstView类的代码如下：</p>

<pre class="line-numbers"><code class="language-java">public class CustomFirstView extends View {

    private String customText;
    private Paint mPaint;

    public CustomFirstView(Context context) {
        super(context);
    }

    public CustomFirstView(Context context, AttributeSet attrs) {
        super(context, attrs);

        initView();

        TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.CustomFirstView);
        customText = typedArray.getString(R.styleable.CustomFirstView_customText);
        typedArray.recycle();
    }

    private void initView() {
        mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mPaint.setTextSize(100);
        mPaint.setColor(Color.RED);
    }

    public CustomFirstView(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
//        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        Rect rect = getTextRect();
        int textWidth = rect.width();
        int textHeight = rect.height();
        int width = measureWidth(widthMeasureSpec,textWidth);
        int height = measureHeight(heightMeasureSpec,textHeight);
        setMeasuredDimension(width, height);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        //将文字放在正中间;
        Rect textRect = getTextRect();
        int viewWidth = getMeasuredWidth();
        int viewHeight =getMeasuredHeight();
        Paint.FontMetrics fontMetrics = mPaint.getFontMetrics();
        int x = (viewWidth - textRect.width()) / 2;
        int y = (int) (viewHeight / 2 + (fontMetrics.descent - fontMetrics.ascent) / 2 - fontMetrics.descent);
        canvas.drawText(customText,x,y,mPaint);
    }

    private int measureWidth(int widthMeasureSpec,int textWidth) {
        int mode = MeasureSpec.getMode(widthMeasureSpec);
        int size = MeasureSpec.getSize(widthMeasureSpec);
        int width = 0;
        switch (mode) {
            case MeasureSpec.EXACTLY:
                //宽度为match_parent或者具体值时，直接将size作为组件的宽度；
                width = size;
                break;
            case MeasureSpec.AT_MOST:
                //宽度为wrap_content，宽度需要计算。也就是在这里要根据具体的业务实现来设置宽度值；
                width = textWidth;
                break;
            case MeasureSpec.UNSPECIFIED:
                break;
        }
        return width;
    }

    private int measureHeight(int heightMeasureSpec,int textHeight) {
        int mode = MeasureSpec.getMode(heightMeasureSpec);
        int size = MeasureSpec.getSize(heightMeasureSpec);
        int height = 0;

        switch (mode) {
            case MeasureSpec.EXACTLY:
                //高度为match_parent或者具体值时，直接将size作为组件的高度；
                height = size;
                break;
            case MeasureSpec.AT_MOST:
                //高度为wrap_content，高度值需要计算。也就是在这里要根据具体的业务实现来设置高度值；
                height = textHeight;
                break;
            case MeasureSpec.UNSPECIFIED:
                break;
        }
        return height;
    }

    private Rect getTextRect() {
        //根绝Paint设置跌绘制参数计算文字所占的宽度;
        Rect rect = new Rect();
        //文字所占的区域保存在rect中；
        mPaint.getTextBounds(customText, 0, customText.length(), rect);
        return rect;
    }

}
</code></pre>

<h3 id="toc_6">读取来自style和theme中的属性</h3>

<p>&emsp;&emsp;组件的属性可以在4个地方定义，如下：<br/>
1 . 组件；<br/>
2 . 组件的style属性；<br/>
3 . theme；<br/>
4 . theme的style属性；</p>

<p>&emsp;&emsp;我们通过一个案例来进行学习和讲解。比如我们有一个自定义组件类AttrView，继承自View类。AttrView类有四个属性：attr1、attr2、attr3、attr4。另外，定义了一个属性myStyle，该属性定义在declare-styleable标记之外，类型为reference，用于theme的style属性。这些属性在res/values/attrs.xml文件中，如下：</p>

<pre class="line-numbers"><code class="language-java">&lt;resources&gt;
    &lt;declare-styleable name=AttrView&gt;
        &lt;attr name=&quot;attr1&quot; format=&quot;string&quot;&gt;&lt;/attr&gt;
        &lt;attr name=&quot;attr2&quot; format=&quot;string&quot;&gt;&lt;/attr&gt;
        &lt;attr name=&quot;attr3&quot; format=&quot;string&quot;&gt;&lt;/attr&gt;
        &lt;attr name=&quot;attr4&quot; format=&quot;string&quot;&gt;&lt;/attr&gt;
    &lt;/declare-styleable&gt;
&lt;/resources&gt;
</code></pre>

<p>&emsp;&emsp;我们将这4个属性应用在不同的场合，分别为组件、组件的style属性、ttheme、theme的style属性。</p>

<p>&emsp;&emsp;我们使用的layout文件:</p>

<pre class="line-numbers"><code class="language-java">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; 
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;  
    android:orientation=&quot;vertical&quot; 
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;&gt; 
    
    &lt;com.example.kang.AttrView
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot; 
    app:attr1=&quot;attr1&quot; 
    style=&quot;@style/viewStyle&quot;
    /&gt; 
    
&lt;/LinearLayout&gt;
</code></pre>

<p>&emsp;&emsp;app:attr1=&quot;attr1&quot;使用了属性attr1，style=&quot;@style/viewStyle&quot;使用了属性attr2，其中@style/viewStyle定义在res/values/style.xml文件中，当然，该文件还定义了整个App工程的主题（theme），该文件如下：</p>

<pre class="line-numbers"><code class="language-java">&lt;resources&gt;
    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;
        &lt;item name=&quot;attr3&quot;&gt;attr3&lt;/item&gt;
        &lt;item name=&quot;myStyle&quot;&gt;@style/myDefaultStyle&lt;/item&gt;
    &lt;/style&gt;
    
    &lt;style name=&quot;myDefaultStyle&quot;&gt;
        &lt;item name=&quot;attr4&quot;&gt;&lt;/item&gt;
    &lt;/style&gt;
    
    &lt;style name=&quot;viewStyle&quot;&gt;
        &lt;item name=&quot;attr2&quot;&gt;attr2&lt;/item&gt;
    &lt;/style&gt;
&lt;/resources&gt;
</code></pre>

<p>&emsp;&emsp;在工程的主题（theme）AppTheme中，使用了属性attr3，同时使用了style属性myStyle，该style属性又引用了@style/myDefaultStyle，myDefaultStyle中使用了属性attr4.总结起来，attr1是组件的直接属性，attr2是组件的style属性引用的属性，attr3是工程主题（theme）属性，attr4时工程主题（theme）的style属性。现在，我们在AttrView类的构造方法中读取这4个属性值：</p>

<pre class="line-numbers"><code class="language-java">public AttrView(Context context,AttributeSet attrs){
    this(context,attr,R.attr.myStyle);
}

public AttrView(Context context,AttributeSet attrs,int defStyleAttr){
    super(context,attrs,defStyleAttr);
    TypedArray typedArray = context.obtainStyledAttributes(attrs,R.styleable.AttrView,defStyleAttr,R.style.myDefaultStyle);
    String attr1 = typedArray.getString(R.styleable.AttrView_attr1);
    String attr2 = typedArray.getString(R.styleable.AttrView_attr2);
    String attr3 = typedArray.getString(R.styleable.AttrView_attr3);
    String attr4 = typedArray.getString(R.styleable.AttrView_attr4);
}
</code></pre>

<p>&emsp;&emsp;我们在AttrView（Context context,AttributeSet attrs）构造方法中，调用了AttrView(Context context,AttributeSet attrs,int defStyleAttr)构造方法，我们调用了重载方法obtainStyledAttributes（），该方法的原型为：</p>

<pre class="line-numbers"><code class="language-java">public final TypedArray obtainStyledAttributes(AttributeSet set, @StyleableRes int[] attrs, @AttrRes int defStyleAttr,@StyleRes int defStyleRes) {
        
}
</code></pre>

<p>&emsp;&emsp;在该方法中，参数如下：<br/>
1 . set:属性值的集合；<br/>
2 . attrs:我们要获取的属性的资源ID的一个数组，我们定义了attr1、attr2、attr3、attr4，这4个属性自动生成的索引会存储到R.styleable.AttrView数组中，该数组就是attrs参数；<br/>
3 . defStyleAttr:当前Theme中style属性，如果组件和组件的style属性都没有为View指定属性时，将从Theme的Style中查找相应的属性值；<br/>
4 . defStyleRes:指向一个Style的资源ID，但是仅在defStyleAttr为0或defStyleAttr不为0但Theme中没有为defStyleAttr属性赋值时起作用；</p>

<p>&emsp;&emsp;我们读取attr属性的优先级的流程图，如下：</p>

<p><img src="../asset/img/%E5%B1%9E%E6%80%A7%E5%80%BC%E4%BC%98%E5%85%88%E7%BA%A7%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt=""/></p>

<h2 id="toc_7">重写onDraw()方法</h2>

<p>-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-<br/>
-------------------------last line for now-------------------------</p>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15970492312259.html"  title="Previous Post: TelephonyManager.java">&laquo; TelephonyManager.java</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15966325912957.html" 
	        title="Next Post: 使用tcpdump抓包">使用tcpdump抓包 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15966352005041.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    


  </body>
</html>
