<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  Activity - KangLu
  
  </title>
 <meta name="description" content="个人文章">
 <link href="atom.xml" rel="alternate" title="KangLu" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">KangLu</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; KangLu</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>Android Studio技巧</label></li>

          
            <li><a title="Android Studio使用小技巧" href="15586135036171.html">Android Studio使用小技巧</a></li>
          
            <li><a title="AAPT命令" href="15706865946961.html">AAPT命令</a></li>
          
            <li><a title="ADB命令" href="15706865755803.html">ADB命令</a></li>
          
            <li><a title="设置代码信息模版" href="15686328305080.html">设置代码信息模版</a></li>
          
            <li><a title="报错问题" href="15680295419393.html">报错问题</a></li>
          
            <li><a title="Gradle和Gradle插件之间的版本关联" href="15663700347276.html">Gradle和Gradle插件之间的版本关联</a></li>
          
            <li><a title="build.gradle文件" href="15638732552597.html">build.gradle文件</a></li>
          

      
        <li class="divider"></li>
        <li><label>四大组件</label></li>

          
            <li><a title="安卓存储方式" href="15720050214610.html">安卓存储方式</a></li>
          
            <li><a title="安卓事件处理" href="15717946812357.html">安卓事件处理</a></li>
          
            <li><a title="Handler消息机制" href="15681720095770.html">Handler消息机制</a></li>
          
            <li><a title="Intent机制和Bundle" href="15640232512188.html">Intent机制和Bundle</a></li>
          
            <li><a title="ContentProvider" href="15603581865930.html">ContentProvider</a></li>
          
            <li><a title="Service" href="15603581806506.html">Service</a></li>
          
            <li><a title="BroadcastReceiver" href="15603581707523.html">BroadcastReceiver</a></li>
          
            <li><a title="Activity" href="15598792154683.html">Activity</a></li>
          

      
        <li class="divider"></li>
        <li><label>Android组件</label></li>

          
            <li><a title="TabLayout" href="15639475255226.html">TabLayout</a></li>
          
            <li><a title="SwipeRefreshLayout" href="15607374213373.html">SwipeRefreshLayout</a></li>
          
            <li><a title="ScrollView和HorizontalView" href="15601389773513.html">ScrollView和HorizontalView</a></li>
          
            <li><a title="ViewPager" href="15601389699132.html">ViewPager</a></li>
          
            <li><a title="WebView" href="15601389648936.html">WebView</a></li>
          
            <li><a title="RecyclerView" href="15601389530971.html">RecyclerView</a></li>
          
            <li><a title="ListView" href="15590482064056.html">ListView</a></li>
          
            <li><a title="ProgressBar" href="15601389345357.html">ProgressBar</a></li>
          
            <li><a title="CheckBox和RadioButton" href="15601388701602.html">CheckBox和RadioButton</a></li>
          
            <li><a title="Spinner" href="15601388608282.html">Spinner</a></li>
          
            <li><a title="ImageView" href="15590447462728.html">ImageView</a></li>
          
            <li><a title="Button" href="15590305484634.html">Button</a></li>
          
            <li><a title="EditText" href="15587752872990.html">EditText</a></li>
          
            <li><a title="TextView" href="15584534943886.html">TextView</a></li>
          
            <li><a title="View" href="15587797736951.html">View</a></li>
          
            <li><a title="序" href="15584059143309.html">序</a></li>
          

      
        <li class="divider"></li>
        <li><label>网络请求相关</label></li>

          
            <li><a title="网络相关" href="15616048657421.html">网络相关</a></li>
          

      
        <li class="divider"></li>
        <li><label>Android功能</label></li>

          
            <li><a title="常用工具类和方法" href="15609277381914.html">常用工具类和方法</a></li>
          
            <li><a title="拍照和读取本地相册" href="15603979455589.html">拍照和读取本地相册</a></li>
          
            <li><a title="控制系统硬件功能" href="15603585084416.html">控制系统硬件功能</a></li>
          

      
        <li class="divider"></li>
        <li><label>Android其他</label></li>

          
            <li><a title="Handler消息机制" href="15640230934557.html">Handler消息机制</a></li>
          
            <li><a title="内存泄漏" href="15638690144641.html">内存泄漏</a></li>
          
            <li><a title="画图" href="15627251763320.html">画图</a></li>
          
            <li><a title="反编译" href="15626395593984.html">反编译</a></li>
          
            <li><a title="assets资源" href="15608221314548.html">assets资源</a></li>
          
            <li><a title="SharedPreferences" href="15601718627780.html">SharedPreferences</a></li>
          
            <li><a title="Permissions权限" href="15597992631758.html">Permissions权限</a></li>
          
            <li><a title="res文件夹中的资源" href="15597050707116.html">res文件夹中的资源</a></li>
          
            <li><a title="Manifest清单文件" href="15596519462062.html">Manifest清单文件</a></li>
          
            <li><a title="动画" href="15591315255964.html">动画</a></li>
          
            <li><a title="Style和Theme" href="15591171572096.html">Style和Theme</a></li>
          

      
        <li class="divider"></li>
        <li><label>安卓多媒体开发</label></li>

          
            <li><a title="音视频相关" href="15635278413412.html">音视频相关</a></li>
          
            <li><a title="相机相关" href="15635278316611.html">相机相关</a></li>
          

      
        <li class="divider"></li>
        <li><label>第三方库</label></li>

          
            <li><a title="Stetho" href="15632684758267.html">Stetho</a></li>
          
            <li><a title="LeakCanary" href="15632684640367.html">LeakCanary</a></li>
          
            <li><a title="Gson" href="15632684493835.html">Gson</a></li>
          
            <li><a title="支付" href="15632684444086.html">支付</a></li>
          
            <li><a title="推送" href="15632684365504.html">推送</a></li>
          
            <li><a title="二维码条形码库" href="15632683396317.html">二维码条形码库</a></li>
          
            <li><a title="RxJava" href="15632683277748.html">RxJava</a></li>
          
            <li><a title="SqlBright" href="15632683205618.html">SqlBright</a></li>
          
            <li><a title="GreenDao" href="15632683120036.html">GreenDao</a></li>
          
            <li><a title="Fresco" href="15632683056692.html">Fresco</a></li>
          
            <li><a title="Picasso" href="15632683006333.html">Picasso</a></li>
          
            <li><a title="Glide" href="15632682942973.html">Glide</a></li>
          
            <li><a title="ButterKnife" href="15632682824135.html">ButterKnife</a></li>
          
            <li><a title="EventBus" href="15632682766122.html">EventBus</a></li>
          
            <li><a title="Retrofit" href="15632682688049.html">Retrofit</a></li>
          
            <li><a title="OkHttp" href="15632682616090.html">OkHttp</a></li>
          

      
        <li class="divider"></li>
        <li><label>安卓源码</label></li>

          
            <li><a title="JNI调用机制" href="15719841747032.html">JNI调用机制</a></li>
          
            <li><a title="Binder机制" href="15719000904205.html">Binder机制</a></li>
          
            <li><a title="安卓源码目录结构分析" href="15713661513977.html">安卓源码目录结构分析</a></li>
          
            <li><a title="preloaded-classes" href="15717452568747.html">preloaded-classes</a></li>
          

      
        <li class="divider"></li>
        <li><label>Git</label></li>

          
            <li><a title="Git按照功能来分类" href="15718356444970.html">Git按照功能来分类</a></li>
          
            <li><a title="Git常见用法" href="15607376634694.html">Git常见用法</a></li>
          

      
        <li class="divider"></li>
        <li><label>数据结构和算法</label></li>

          
            <li><a title="链表" href="15644786995373.html">链表</a></li>
          
            <li><a title="数组" href="15644690293137.html">数组</a></li>
          
            <li><a title="基础" href="15644655646063.html">基础</a></li>
          

      
        <li class="divider"></li>
        <li><label>网络爬虫</label></li>

          
            <li><a title="爬虫--基本库的使用" href="15660531164999.html">爬虫--基本库的使用</a></li>
          
            <li><a title="爬虫概述" href="15660114926379.html">爬虫概述</a></li>
          

      
        <li class="divider"></li>
        <li><label>网络安全</label></li>

          
            <li><a title="基础" href="15650980568729.html">基础</a></li>
          

      
        <li class="divider"></li>
        <li><label>计算机基础</label></li>

          
            <li><a title="HTTP基本原理" href="15659232055748.html">HTTP基本原理</a></li>
          

      
        <li class="divider"></li>
        <li><label>Linux系统</label></li>

          
            <li><a title="基础简述" href="15719238641803.html">基础简述</a></li>
          

      
        <li class="divider"></li>
        <li><label>React-Native</label></li>

          
            <li><a title="ScrollView组件" href="15622306484069.html">ScrollView组件</a></li>
          
            <li><a title="组件的生命周期" href="15621446974979.html">组件的生命周期</a></li>
          
            <li><a title="TextInput组件" href="15621338635960.html">TextInput组件</a></li>
          
            <li><a title="遇到的问题" href="15620469922995.html">遇到的问题</a></li>
          
            <li><a title="组件" href="15617091937336.html">组件</a></li>
          
            <li><a title="React-Native零碎" href="15616187358724.html">React-Native零碎</a></li>
          
            <li><a title="react-navigation" href="15584071613702.html">react-navigation</a></li>
          

      
        <li class="divider"></li>
        <li><label>随想</label></li>

          
            <li><a title="偎" href="15637966637605.html">偎</a></li>
          
            <li><a title="你说我说" href="15625528494476.html">你说我说</a></li>
          
            <li><a title="青黄" href="15609363144124.html">青黄</a></li>
          
            <li><a title="to be a free man" href="15605804886383.html">to be a free man</a></li>
          
            <li><a title="年年岁岁 碎碎念念" href="15600901474068.html">年年岁岁 碎碎念念</a></li>
          
            <li><a title="for" href="15583472660662.html">for</a></li>
          

      
        <li class="divider"></li>
        <li><label>陌上归</label></li>

          
            <li><a title="待看的东西" href="15686842332295.html">待看的东西</a></li>
          
            <li><a title="大纲" href="15613407387642.html">大纲</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>Android Studio技巧</span></li>
                        
                          <li><a title="Android Studio使用小技巧" href="15586135036171.html">Android Studio使用小技巧</a></li>
                        
                          <li><a title="AAPT命令" href="15706865946961.html">AAPT命令</a></li>
                        
                          <li><a title="ADB命令" href="15706865755803.html">ADB命令</a></li>
                        
                          <li><a title="设置代码信息模版" href="15686328305080.html">设置代码信息模版</a></li>
                        
                          <li><a title="报错问题" href="15680295419393.html">报错问题</a></li>
                        
                          <li><a title="Gradle和Gradle插件之间的版本关联" href="15663700347276.html">Gradle和Gradle插件之间的版本关联</a></li>
                        
                          <li><a title="build.gradle文件" href="15638732552597.html">build.gradle文件</a></li>
                        

                    
                      <li class="side-title"><span>四大组件</span></li>
                        
                          <li><a title="安卓存储方式" href="15720050214610.html">安卓存储方式</a></li>
                        
                          <li><a title="安卓事件处理" href="15717946812357.html">安卓事件处理</a></li>
                        
                          <li><a title="Handler消息机制" href="15681720095770.html">Handler消息机制</a></li>
                        
                          <li><a title="Intent机制和Bundle" href="15640232512188.html">Intent机制和Bundle</a></li>
                        
                          <li><a title="ContentProvider" href="15603581865930.html">ContentProvider</a></li>
                        
                          <li><a title="Service" href="15603581806506.html">Service</a></li>
                        
                          <li><a title="BroadcastReceiver" href="15603581707523.html">BroadcastReceiver</a></li>
                        
                          <li><a title="Activity" href="15598792154683.html">Activity</a></li>
                        

                    
                      <li class="side-title"><span>Android组件</span></li>
                        
                          <li><a title="TabLayout" href="15639475255226.html">TabLayout</a></li>
                        
                          <li><a title="SwipeRefreshLayout" href="15607374213373.html">SwipeRefreshLayout</a></li>
                        
                          <li><a title="ScrollView和HorizontalView" href="15601389773513.html">ScrollView和HorizontalView</a></li>
                        
                          <li><a title="ViewPager" href="15601389699132.html">ViewPager</a></li>
                        
                          <li><a title="WebView" href="15601389648936.html">WebView</a></li>
                        
                          <li><a title="RecyclerView" href="15601389530971.html">RecyclerView</a></li>
                        
                          <li><a title="ListView" href="15590482064056.html">ListView</a></li>
                        
                          <li><a title="ProgressBar" href="15601389345357.html">ProgressBar</a></li>
                        
                          <li><a title="CheckBox和RadioButton" href="15601388701602.html">CheckBox和RadioButton</a></li>
                        
                          <li><a title="Spinner" href="15601388608282.html">Spinner</a></li>
                        
                          <li><a title="ImageView" href="15590447462728.html">ImageView</a></li>
                        
                          <li><a title="Button" href="15590305484634.html">Button</a></li>
                        
                          <li><a title="EditText" href="15587752872990.html">EditText</a></li>
                        
                          <li><a title="TextView" href="15584534943886.html">TextView</a></li>
                        
                          <li><a title="View" href="15587797736951.html">View</a></li>
                        
                          <li><a title="序" href="15584059143309.html">序</a></li>
                        

                    
                      <li class="side-title"><span>网络请求相关</span></li>
                        
                          <li><a title="网络相关" href="15616048657421.html">网络相关</a></li>
                        

                    
                      <li class="side-title"><span>Android功能</span></li>
                        
                          <li><a title="常用工具类和方法" href="15609277381914.html">常用工具类和方法</a></li>
                        
                          <li><a title="拍照和读取本地相册" href="15603979455589.html">拍照和读取本地相册</a></li>
                        
                          <li><a title="控制系统硬件功能" href="15603585084416.html">控制系统硬件功能</a></li>
                        

                    
                      <li class="side-title"><span>Android其他</span></li>
                        
                          <li><a title="Handler消息机制" href="15640230934557.html">Handler消息机制</a></li>
                        
                          <li><a title="内存泄漏" href="15638690144641.html">内存泄漏</a></li>
                        
                          <li><a title="画图" href="15627251763320.html">画图</a></li>
                        
                          <li><a title="反编译" href="15626395593984.html">反编译</a></li>
                        
                          <li><a title="assets资源" href="15608221314548.html">assets资源</a></li>
                        
                          <li><a title="SharedPreferences" href="15601718627780.html">SharedPreferences</a></li>
                        
                          <li><a title="Permissions权限" href="15597992631758.html">Permissions权限</a></li>
                        
                          <li><a title="res文件夹中的资源" href="15597050707116.html">res文件夹中的资源</a></li>
                        
                          <li><a title="Manifest清单文件" href="15596519462062.html">Manifest清单文件</a></li>
                        
                          <li><a title="动画" href="15591315255964.html">动画</a></li>
                        
                          <li><a title="Style和Theme" href="15591171572096.html">Style和Theme</a></li>
                        

                    
                      <li class="side-title"><span>安卓多媒体开发</span></li>
                        
                          <li><a title="音视频相关" href="15635278413412.html">音视频相关</a></li>
                        
                          <li><a title="相机相关" href="15635278316611.html">相机相关</a></li>
                        

                    
                      <li class="side-title"><span>第三方库</span></li>
                        
                          <li><a title="Stetho" href="15632684758267.html">Stetho</a></li>
                        
                          <li><a title="LeakCanary" href="15632684640367.html">LeakCanary</a></li>
                        
                          <li><a title="Gson" href="15632684493835.html">Gson</a></li>
                        
                          <li><a title="支付" href="15632684444086.html">支付</a></li>
                        
                          <li><a title="推送" href="15632684365504.html">推送</a></li>
                        
                          <li><a title="二维码条形码库" href="15632683396317.html">二维码条形码库</a></li>
                        
                          <li><a title="RxJava" href="15632683277748.html">RxJava</a></li>
                        
                          <li><a title="SqlBright" href="15632683205618.html">SqlBright</a></li>
                        
                          <li><a title="GreenDao" href="15632683120036.html">GreenDao</a></li>
                        
                          <li><a title="Fresco" href="15632683056692.html">Fresco</a></li>
                        
                          <li><a title="Picasso" href="15632683006333.html">Picasso</a></li>
                        
                          <li><a title="Glide" href="15632682942973.html">Glide</a></li>
                        
                          <li><a title="ButterKnife" href="15632682824135.html">ButterKnife</a></li>
                        
                          <li><a title="EventBus" href="15632682766122.html">EventBus</a></li>
                        
                          <li><a title="Retrofit" href="15632682688049.html">Retrofit</a></li>
                        
                          <li><a title="OkHttp" href="15632682616090.html">OkHttp</a></li>
                        

                    
                      <li class="side-title"><span>安卓源码</span></li>
                        
                          <li><a title="JNI调用机制" href="15719841747032.html">JNI调用机制</a></li>
                        
                          <li><a title="Binder机制" href="15719000904205.html">Binder机制</a></li>
                        
                          <li><a title="安卓源码目录结构分析" href="15713661513977.html">安卓源码目录结构分析</a></li>
                        
                          <li><a title="preloaded-classes" href="15717452568747.html">preloaded-classes</a></li>
                        

                    
                      <li class="side-title"><span>Git</span></li>
                        
                          <li><a title="Git按照功能来分类" href="15718356444970.html">Git按照功能来分类</a></li>
                        
                          <li><a title="Git常见用法" href="15607376634694.html">Git常见用法</a></li>
                        

                    
                      <li class="side-title"><span>数据结构和算法</span></li>
                        
                          <li><a title="链表" href="15644786995373.html">链表</a></li>
                        
                          <li><a title="数组" href="15644690293137.html">数组</a></li>
                        
                          <li><a title="基础" href="15644655646063.html">基础</a></li>
                        

                    
                      <li class="side-title"><span>网络爬虫</span></li>
                        
                          <li><a title="爬虫--基本库的使用" href="15660531164999.html">爬虫--基本库的使用</a></li>
                        
                          <li><a title="爬虫概述" href="15660114926379.html">爬虫概述</a></li>
                        

                    
                      <li class="side-title"><span>网络安全</span></li>
                        
                          <li><a title="基础" href="15650980568729.html">基础</a></li>
                        

                    
                      <li class="side-title"><span>计算机基础</span></li>
                        
                          <li><a title="HTTP基本原理" href="15659232055748.html">HTTP基本原理</a></li>
                        

                    
                      <li class="side-title"><span>Linux系统</span></li>
                        
                          <li><a title="基础简述" href="15719238641803.html">基础简述</a></li>
                        

                    
                      <li class="side-title"><span>React-Native</span></li>
                        
                          <li><a title="ScrollView组件" href="15622306484069.html">ScrollView组件</a></li>
                        
                          <li><a title="组件的生命周期" href="15621446974979.html">组件的生命周期</a></li>
                        
                          <li><a title="TextInput组件" href="15621338635960.html">TextInput组件</a></li>
                        
                          <li><a title="遇到的问题" href="15620469922995.html">遇到的问题</a></li>
                        
                          <li><a title="组件" href="15617091937336.html">组件</a></li>
                        
                          <li><a title="React-Native零碎" href="15616187358724.html">React-Native零碎</a></li>
                        
                          <li><a title="react-navigation" href="15584071613702.html">react-navigation</a></li>
                        

                    
                      <li class="side-title"><span>随想</span></li>
                        
                          <li><a title="偎" href="15637966637605.html">偎</a></li>
                        
                          <li><a title="你说我说" href="15625528494476.html">你说我说</a></li>
                        
                          <li><a title="青黄" href="15609363144124.html">青黄</a></li>
                        
                          <li><a title="to be a free man" href="15605804886383.html">to be a free man</a></li>
                        
                          <li><a title="年年岁岁 碎碎念念" href="15600901474068.html">年年岁岁 碎碎念念</a></li>
                        
                          <li><a title="for" href="15583472660662.html">for</a></li>
                        

                    
                      <li class="side-title"><span>陌上归</span></li>
                        
                          <li><a title="待看的东西" href="15686842332295.html">待看的东西</a></li>
                        
                          <li><a title="大纲" href="15613407387642.html">大纲</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>Activity</h1>

<h2 id="toc_0">Activity生命周期</h2>

<table>
<thead>
<tr>
<th style="text-align: center">生命周期方法</th>
<th>描述</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: center">onCreate()</td>
<td></td>
</tr>
<tr>
<td style="text-align: center">onStart()</td>
<td></td>
</tr>
<tr>
<td style="text-align: center">onResume()</td>
<td></td>
</tr>
<tr>
<td style="text-align: center">onPause()</td>
<td></td>
</tr>
<tr>
<td style="text-align: center">onStop()</td>
<td></td>
</tr>
<tr>
<td style="text-align: center">onRestart()</td>
<td></td>
</tr>
<tr>
<td style="text-align: center">onDestroy()</td>
<td></td>
</tr>
</tbody>
</table>

<h2 id="toc_1">Activity启动模式</h2>

<p>&emsp;&emsp;<strong>启动模式一共四种：standard、singleTop、singleTask、singleInstance，可以在AndroidManifest.xml中通过给<activity>标签指定android:launchMode属性来选择启动模式。</strong></p>

<ul>
<li><font color=red>standard</font>:是活动默认的启动模式，在不进行显示指定的情况下，所有活动都会自动使用这种启动模式。在standard模式（即默认情况）下，每当启动一个新的活动，它就会在返回栈中入栈，并处于栈顶的位置。对于使用standard模式的活动，系统不会在乎这个活动是否已经在返回栈中存在，每次启动都会创建该活动的一个新的实例。</li>
<li><font color=red>singleTop</font>:当活动的启动模式指定为singleTop时，在启动活动时，如果发现返回栈的栈顶已经是该活动了，则认为可以直接使用它，不会再创建新的活动实例。</li>
<li><font color=red>singleTask</font>:当活动的启动模式指定为singleTask，每次启动该活动时系统首先会在返回栈中检查是否存在该活动的实例，如果发现已经存在则直接使用该实例，并把这个活动之上的所有活动统统出栈，如果没有发现就会创建一个新的活动实例。</li>
<li><font color=red>singleInstance</font>:指定为singleInstance模式的活动会启用一个新的返回栈来管理这个活动（其实如果singleTask模式指定了不同的taskAffinity，也会启动一个新的返回栈）。假设我们的程序中有一个活动是允许其他程序调用的，那我们要实现其他程序和我们的程序都可以共享这个活动的实例。前三种启动模式肯定是做不到的，因为每个应用程序都会有自己的返回栈，同一个活动在不同的返回栈中入栈时必然是创建了新的实例。而使用singleInstance模式就可以解决这个问题，在这种模式下会有一个单独的返回栈来管理这个活动，不管是哪个应用程序来访问这个活动，都共用的同一个返回栈，也就解决了共享活动实例的问题。</li>
</ul>

<h2 id="toc_2">控制Activity的生命周期</h2>

<ul>
<li><font color=red>强制执行单任务模式</font>:</li>
<li><font color=red>强制手机屏幕方向</font>:<br/>
&emsp;&emsp;几乎所有的Android设备都带有加速度计，这使得该设备可以判断方向，当设备的屏幕在横向和纵向模式之间切换时，系统默认的动作是相应地旋转应用程序的视图。 <br/>
&emsp;&emsp;默认情况下，当手机屏幕方向改变时，Activity将被结束然后再重新启动，也就是会执行onPause()--onStop()--onDestroy()--onCreate()--onStart()--onResume()这几个方法，会使该应用丢失当前的状态。<br/>
&emsp;&emsp;对于屏幕改变方向的问题，Android提供了两种解决方案，一种是在改变方向之前保存用户的状态，然后再重启该Activity时恢复先前的用户状态。另一种方法是强制屏幕方向，禁止旋转切换应用程序的视图。<br/>
&emsp;&emsp;这里介绍第二种方法：在AndroidManifest.xml中事先指定某个Activity的固定视图方法以达到目的，如下：</li>
</ul>

<table>
<thead>
<tr>
<th style="text-align: center">Activity视图模式</th>
<th>方法</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: center">纵向模式</td>
<td>android:screenOrientation=&quot;portrait&quot;</td>
</tr>
<tr>
<td style="text-align: center">横向模式</td>
<td>android:screenOrientation=&quot;landscape&quot;</td>
</tr>
</tbody>
</table>

<p>&emsp;&emsp;不过只是设置了Activity的视图模式，在旋转手机屏幕后，视图始终保持设定好的视图模式，但是Activity还是会经历onPause()--onStop()--onDestroy()方法，还是没有解决Activity状态丢失的问题。也就是说，设置Android:screenOrientation属性只能使得应用程序始终保持指定的方向，并不能防止Activity的重新启动。要实现Activity在屏幕方向改变时不被重启，还需要在AndroidManifest.xml中设置android:configChanges属性告诉系统对应用程序方向的改变进行处理而不是重启应用程序。代码如下：</p>

<pre class="line-numbers"><code class="language-java">android:configChanges=&quot;orientation|keyboardHidden&quot;
</code></pre>

<p>设置好上述属性之后，当屏幕方向改变或硬键盘滑出时，Android将不会重启Activity，而是调用onConfigurationChange()方法对事件进行处理。</p>

<pre class="line-numbers"><code class="language-java">@Override
public void onConfigurationChanged(Configuration newConfig){
    super.onConfigurationChanged(newConfig);
    
}
</code></pre>

<ul>
<li><font color=red>保存和恢复Activity的信息</font>:
&emsp;&emsp;为Activity实现这一功能的方法就是onSaveInstanceState()和onRestoreInstanceState()。当一个Activity即将被程序杀死时，可以通过重写onSaveInstanceState()方法来保存需要保存的相关信息。当重新创建该Activity后，之前onSaveInstanceState()方法保存的状态信息将通过Bundle传递给onCreate()方法，然后就可以利用onRestoreInstanceState()方法来恢复之前的状态信息了。<br/>
&emsp;&emsp;值得注意的是，onSaveInstanceState()并不总是在Activity被销毁前都会被调用，当系统未经用户允许时销毁了该Activity，则onSaveInstanceState()方法将会被系统调用，这是系统的责任，因为它必须要提供一个机会让用户保存必要的数据。<br/>
&emsp;&emsp;以下几种情况，系统会调用onSaveInstanceState()方法：<br/>
1.当用户按下Home键，系统不知道用户在按下Home键之后要运行多少其他程序，自然也不知道当前Activity是否会被销毁，故系统会调用onSaveInstanceState()方法，让用户有机会保存某些非永久性的数据；<br/>
2.长按Home键或者Menu键（具体看手机厂商的定义），选择运行其他程序；<br/>
3.按下电源键，是手机设备处于屏保状态；<br/>
4.屏幕方向切换，而用户并未设置configChanges属性指定系统处理该事件时，系统会销毁当前Activity，在屏幕切换后自动创建该Activity，所以onSaveInstanceState()方法一定会被执行；<br/>
&emsp;&emsp;当然，也要注意，onSaveInstanceState()方法和onRestoreInstanceState()并不一定被成对调用；</li>
</ul>

<h2 id="toc_3">注意事项</h2>

<ul>
<li>startActivity（）方法最终调用的是startActivityForResult()方法，只是startActivity()的实现是startActivityForResult()方法内部的请求码requestCode固定为-1，所以如果使用startActivityForResult()方法时，请求码写成了-1，那么就相当于调用了startActivity()方法，onActivityResult()方法不会被回调；</li>
<li>设置启动页：<br/>
我们一般会设置启动页的style的android:windowBackground的属性来设置启动页的背景图片，如果不需要在启动页设置除了背景图片以外的控件，那么甚至可以不需要在启动页SplashActivity页面中使用setContentView(R.layout.activity_splash)方法，就直接在onCreate()方法中进行页面跳转或者数据处理；</li>
</ul>

<pre class="line-numbers"><code class="language-java">&lt;!--启动页style--&gt;
&lt;style name=&quot;AppSplashTheme&quot; parent=&quot;AppTheme&quot;&gt;
    &lt;item name=&quot;android:windowBackground&quot;&gt;@mipmap/ic_launcher&lt;/item&gt;
&lt;/style&gt;

&lt;!-- 启动页面 --&gt;
&lt;activity
    android:name=&quot;.SplashActivity&quot;
    android:screenOrientation=&quot;portrait&quot;
    android:theme=&quot;@style/AppSplashTheme&quot;
    &gt;
    &lt;intent-filter&gt;
        &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
        &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;

//SplashActivity页面；
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //进行相应的业务逻辑操作；    
}
</code></pre>

<p>不过，一般我们都会设置启动页的背景图占据全屏幕。就需要style文件中添加一个属性android:windowFullscreen，设置为true；<br/>
还有，带有底部导航栏的手机，需要一个属性android:windowDrawsSystemBarBackgrounds，设置为true，不过该属性的使用需要最低兼容版本为API 21，也就是5.0；</p>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="15600901474068.html"  title="Previous Post: 年年岁岁 碎碎念念">&laquo; 年年岁岁 碎碎念念</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="15597992631758.html" 
	        title="Next Post: Permissions权限">Permissions权限 &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">
<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-55117df11d1413c3" async="async"></script>
<!-- Go to www.addthis.com/dashboard to customize your tools -->
<div class="addthis_native_toolbox"></div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'mweb-en';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '15598792154683.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>
    


  </body>
</html>
